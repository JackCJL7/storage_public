(function(){function K(b,f){var c=0,h=!1,d=window.setInterval(function(){b()&&(window.clearInterval(d),f(h));50<c++&&(window.clearInterval(d),h=!0,f(h))},10)}function P(b){b=b.toLowerCase();return 0===b.indexOf("msie")&&0===b.indexOf("trident")?!1:(b=/(?:msie|rv:)\s?([\d\.]+)/.exec(b))&&10<=parseInt(b[1],10)?!0:!1}function Q(b){b=(b||e.userAgent).toLowerCase();return(b=b.match(/android\s([0-9\.]*)/))?b[1]:!1}function R(b,f){function c(m){if(m){console.log("candicate "+m);var v=S.exec(m);v&&(v=v[1],
    m=m.match(L),void 0===d[v]&&b(v,m,!0),d[v]=!0)}else b()}function h(){p.localDescription.sdp.split("\n").forEach(function(m){m&&0===m.indexOf("a=candidate:")&&c(m)})}if("undefined"!==typeof document&&"function"===typeof document.getElementById){var d={},g=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!g){g=document.getElementById("iframe");if(!g)return;g=g.contentWindow;g=g.RTCPeerConnection||g.mozRTCPeerConnection||g.webkitRTCPeerConnection}if(g){var z=null;
    "Chrome"===a.browser&&58>a.browser.version&&(z={optional:[{RtpDataChannels:!0}]});var p=new g({iceServers:[]},z);f&&(p.addStream?p.addStream(f):p.addTrack&&f.getTracks()[0]&&p.addTrack(f.getTracks()[0],f));p.onicecandidate=function(m){m.candidate&&m.candidate.candidate?c(m.candidate.candidate):c()};if(!f)try{p.createDataChannel("",{reliable:!1})}catch(m){}a.isPromisesSupported?p.createOffer().then(function(m){p.setLocalDescription(m).then(h)}):p.createOffer(function(m){p.setLocalDescription(m,h,function(){})},
    function(){})}}}function T(b){if(E)if(!e.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(e.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!e.enumerateDevices&&e.enumerateDevices&&(e.enumerateDevices=e.enumerateDevices.bind(e)),e.enumerateDevices){w=[];r=[];t=[];u=[];x=y=A=B=C=!1;var f={};e.enumerateDevices(function(c){w=[];r=[];t=[];u=[];c.forEach(function(h){var d={},g;for(g in h)try{"function"!==typeof h[g]&&(d[g]=h[g])}catch(z){}f[d.deviceId+
    d.label+d.kind]||("audio"===d.kind&&(d.kind="audioinput"),"video"===d.kind&&(d.kind="videoinput"),d.deviceId||(d.deviceId=d.id),d.id||(d.id=d.deviceId),d.label?("videoinput"!==d.kind||x||(x=!0),"audioinput"!==d.kind||y||(y=!0)):(d.isCustomLabel=!0,d.label="videoinput"===d.kind?"Camera "+(u.length+1):"audioinput"===d.kind?"Microphone "+(r.length+1):"audiooutput"===d.kind?"Speaker "+(t.length+1):"Please invoke getUserMedia once.","undefined"!==typeof a&&a.browser.isChrome&&46<=a.browser.version&&!/^(https:|chrome-extension:)$/g.test(location.protocol||
    "")&&"undefined"!==typeof document&&"string"===typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(d.label="HTTPs is required to get label of this "+d.kind+" device.")),"audioinput"===d.kind&&(C=!0,-1===r.indexOf(d)&&r.push(d)),"audiooutput"===d.kind&&(B=!0,-1===t.indexOf(d)&&t.push(d)),"videoinput"===d.kind&&(A=!0,-1===u.indexOf(d)&&u.push(d)),w.push(d),f[d.deviceId+d.label+d.kind]=d)});"undefined"!==typeof a&&(a.MediaDevices=w,a.hasMicrophone=C,a.hasSpeakers=
    B,a.hasWebcam=A,a.isWebsiteHasWebcamPermissions=x,a.isWebsiteHasMicrophonePermissions=y,a.audioInputDevices=r,a.audioOutputDevices=t,a.videoInputDevices=u);b&&b()})}else b&&b();else b&&b()}var F="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",q="object"===typeof process&&"object"===typeof process.versions&&process.versions.node&&!process.browser;if(q){var k=process.versions.node.toString().replace("v","");F="Nodejs/"+k+" (NodeOS) AppleWebKit/"+k+" (KHTML, like Gecko) Nodejs/"+
    k+" Nodejs/"+k}(function(b){"undefined"===typeof window&&("undefined"===typeof window&&"undefined"!==typeof global&&(global.navigator={userAgent:F,getUserMedia:function(){}},b.window=global),"undefined"===typeof location&&(b.location={protocol:"file:",href:"",hash:""}),"undefined"===typeof screen&&(b.screen={width:0,height:0}))})("undefined"!==typeof global?global:window);var e=window.navigator;"undefined"!==typeof e?("undefined"!==typeof e.webkitGetUserMedia&&(e.getUserMedia=e.webkitGetUserMedia),
    "undefined"!==typeof e.mozGetUserMedia&&(e.getUserMedia=e.mozGetUserMedia)):e={getUserMedia:function(){},userAgent:F};k=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(e.userAgent||"");var M=-1!==e.userAgent.indexOf("Edge")&&(!!e.msSaveOrOpenBlob||!!e.msSaveBlob),N=!!window.opera||0<=e.userAgent.indexOf(" OPR/"),U=-1<e.userAgent.toLowerCase().indexOf("firefox")&&"netscape"in window&&/ rv:/.test(e.userAgent),V=/^((?!chrome|android).)*safari/i.test(e.userAgent),
    W=!!window.chrome&&!N,X="undefined"!==typeof document&&!!document.documentMode&&!M,n={Android:function(){return e.userAgent.match(/Android/i)},BlackBerry:function(){return e.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return e.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return e.userAgent.match(/Opera Mini/i)},Windows:function(){return e.userAgent.match(/IEMobile/i)},any:function(){return n.Android()||n.BlackBerry()||n.iOS()||n.Opera()||n.Windows()},getOsName:function(){var b="Unknown OS";
    n.Android()&&(b="Android");n.BlackBerry()&&(b="BlackBerry");n.iOS()&&(b="iOS");n.Opera()&&(b="Opera Mini");n.Windows()&&(b="Windows");return b}},l="Unknown OS",D="Unknown OS Version";(q=function(){for(var b=e.appVersion,f=e.userAgent,c="-",h=[{s:"Chrome OS",r:/CrOS/},{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},
    {s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},
    {s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],d=0,g;g=h[d];d++)if(g.r.test(f)){c=g.s;break}h="-";/Windows/.test(c)&&(/Windows (.*)/.test(c)&&(h=/Windows (.*)/.exec(c)[1]),c="Windows");switch(c){case "Mac OS X":/Mac OS X (10[\._\d]+)/.test(f)&&(h=/Mac OS X (10[\._\d]+)/.exec(f)[1]);
    break;case "Android":/Android ([\._\d]+)/.test(f)&&(h=/Android ([\._\d]+)/.exec(f)[1]);break;case "iOS":/OS (\d+)_(\d+)_?(\d+)?/.test(f)&&(h=/OS (\d+)_(\d+)_?(\d+)?/.exec(b))&&3<h.length&&(h=h[1]+"."+h[2]+"."+(h[3]|0))}return{osName:c,osVersion:h}}())&&q.osName&&"-"!=q.osName?(l=q.osName,D=q.osVersion):n.any()&&(l=n.getOsName(),"Android"==l&&(D=Q()));q="object"===typeof process&&"object"===typeof process.versions&&process.versions.node;"Unknown OS"===l&&q&&(l="Nodejs",D=process.versions.node.toString().replace("v",
    ""));var G=!1,H=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(b){"undefined"!==typeof document&&"function"===typeof document.createElement&&(!G&&b in document.createElement("canvas")&&(G=!0),!H&&b in document.createElement("video")&&(H=!0))});var L=/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/,S=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,Y=/[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7}/,w=[],r=[],t=[],u=[];e.mediaDevices&&e.mediaDevices.enumerateDevices&&(e.enumerateDevices=function(b){var f=
    e.mediaDevices.enumerateDevices();f&&f.then?e.mediaDevices.enumerateDevices().then(b)["catch"](function(){b([])}):b([])});var E=!1;"undefined"!==typeof MediaStreamTrack&&"getSources"in MediaStreamTrack?E=!0:e.mediaDevices&&e.mediaDevices.enumerateDevices&&(E=!0);var C=!1,B=!1,A=!1,y=!1,x=!1,a=window.DetectRTC||{};a.browser=function(){var b=e.userAgent,f=e.appName,c=""+parseFloat(e.appVersion);parseInt(e.appVersion,10);var h,d;if(N){f="Opera";try{c=e.userAgent.split("OPR/")[1].split(" ")[0],c.split(".")}catch(z){c=
    "0.0.0.0"}}else if(X){var g=b.indexOf("rv:");0<g?c=b.substring(g+3):(g=b.indexOf("MSIE"),c=b.substring(g+5));f="IE"}else W?(g=b.indexOf("Chrome"),f="Chrome",c=b.substring(g+7)):V?-1!==b.indexOf("CriOS")?(g=b.indexOf("CriOS"),f="Chrome",c=b.substring(g+6)):-1!==b.indexOf("FxiOS")?(g=b.indexOf("FxiOS"),f="Firefox",c=b.substring(g+6)):(g=b.indexOf("Safari"),f="Safari",c=b.substring(g+7),-1!==(g=b.indexOf("Version"))&&(c=b.substring(g+8)),-1!==e.userAgent.indexOf("Version/")&&(c=e.userAgent.split("Version/")[1].split(" ")[0])):
    U?(g=b.indexOf("Firefox"),f="Firefox",c=b.substring(g+8)):(h=b.lastIndexOf(" ")+1)<(g=b.lastIndexOf("/"))&&(f=b.substring(h,g),c=b.substring(g+1),f.toLowerCase()===f.toUpperCase()&&(f=e.appName));M&&(f="Edge",c=e.userAgent.split("Edge/")[1]);-1!==(d=c.search(/[; \)]/))&&(c=c.substring(0,d));b=parseInt(""+c,10);isNaN(b)&&(c=""+parseFloat(e.appVersion),b=parseInt(e.appVersion,10));return{fullVersion:c,version:b,name:f,isPrivateBrowsing:!1}}();(function(b){try{if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,
    1,function(){c=!1},function(h){c=!0});else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){try{var f=window.indexedDB.open("test");f.onerror=function(){return!0}}catch(h){var c=!0}"undefined"===typeof c&&K(function(){return"done"===f.readyState?!0:!1},function(h){h||(c=f.result?!1:!0)})}else if(P(window.navigator.userAgent)){c=!1;try{window.indexedDB||(c=!0)}catch(h){c=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",
    1)}catch(h){c=!0}"undefined"===typeof c&&(c=!1,window.localStorage.removeItem("test"))}}catch(h){c=!1}K(function(){return"undefined"!==typeof c?!0:!1},function(h){b(c)})})(function(b){a.browser.isPrivateBrowsing=!!b});a.browser["is"+a.browser.name]=!0;a.osName=l;a.osVersion=D;var I=!1;["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(b){I||b in window&&(I=!0)});a.isWebRTCSupported=I;a.isORTCSupported="undefined"!==typeof RTCIceGatherer;l=!1;a.browser.isChrome&&
    35<=a.browser.version?l=!0:a.browser.isFirefox&&34<=a.browser.version?l=!0:a.browser.isEdge&&17<=a.browser.version?l=!0:"Android"===a.osName&&a.browser.isChrome&&(l=!0);if(e.getDisplayMedia||e.mediaDevices&&e.mediaDevices.getDisplayMedia)l=!0;/^(https:|chrome-extension:)$/g.test(location.protocol||"")||("undefined"!==typeof document&&"string"===typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(a.browser.isChrome||a.browser.isEdge||a.browser.isOpera)?
    l=!1:a.browser.isFirefox&&(l=!1));a.isScreenCapturingSupported=l;var J=!1,O=!1;["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach(function(b){!J&&b in window&&(J=!0,window[b]&&"createMediaStreamSource"in window[b].prototype&&(O=!0))});a.isAudioContextSupported=J;a.isCreateMediaStreamSourceSupported=O;l=!1;a.browser.isChrome&&31<a.browser.version&&(l=!0);a.isRtpDataChannelsSupported=l;l=!1;a.browser.isFirefox&&28<a.browser.version?l=!0:a.browser.isChrome&&25<a.browser.version?
    l=!0:a.browser.isOpera&&11<=a.browser.version&&(l=!0);a.isSctpDataChannelsSupported=l;a.isMobileDevice=k;k=!1;e.getUserMedia?k=!0:e.mediaDevices&&e.mediaDevices.getUserMedia&&(k=!0);a.browser.isChrome&&46<=a.browser.version&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!==typeof document&&"string"===typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(k="Requires HTTPs");"Nodejs"===a.osName&&(k=!1);a.isGetUserMediaSupported=
    k;k="";screen.width&&(k+=""+(screen.width?screen.width:"")+" x "+(screen.height?screen.height:""));a.displayResolution=k;a.displayAspectRatio=function(b,f){function c(d,g){return 0==g?d:c(g,d%g)}var h=c(b,f);return b/h/(f/h)}(screen.width,screen.height).toFixed(2);a.isCanvasSupportsStreamCapturing=G;a.isVideoSupportsStreamCapturing=H;"Chrome"==a.browser.name&&53<=a.browser.version&&(a.isCanvasSupportsStreamCapturing||(a.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),
    a.isVideoSupportsStreamCapturing||(a.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"));a.DetectLocalIPAddress=function(b,f){if(a.isWebRTCSupported){var c=!0,h=!0;R(function(d){d?d.match(L)?(c=!1,b("Local: "+d,c,h)):(d.match(Y)&&(h=!1),b("Public: "+d,c,h)):b()},f)}};a.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING;a.isWebSocketsBlocked=!a.isWebSocketsSupported;"Nodejs"===a.osName&&(a.isWebSocketsSupported=!0,a.isWebSocketsBlocked=
    !1);a.checkWebSocketsSupport=function(b){b=b||function(){};try{var f,c=new WebSocket("wss://echo.websocket.org:443/");c.onopen=function(){a.isWebSocketsBlocked=!1;f=(new Date).getTime();c.send("ping")};c.onmessage=function(){a.WebsocketLatency=(new Date).getTime()-f+"ms";b();c.close();c=null};c.onerror=function(){a.isWebSocketsBlocked=!0;b()}}catch(h){a.isWebSocketsBlocked=!0,b()}};a.load=function(b){T(b||function(){})};a.MediaDevices="undefined"!==typeof w?w:[];a.hasMicrophone=C;a.hasSpeakers=B;
    a.hasWebcam=A;a.isWebsiteHasWebcamPermissions=x;a.isWebsiteHasMicrophonePermissions=y;a.audioInputDevices=r;a.audioOutputDevices=t;a.videoInputDevices=u;k=!1;"undefined"!==typeof document&&"function"===typeof document.createElement&&"setSinkId"in document.createElement("video")&&(k=!0);a.isSetSinkIdSupported=k;k=!1;a.browser.isFirefox&&"undefined"!==typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&(k=!0):a.browser.isChrome&&"undefined"!==typeof webkitRTCPeerConnection&&"getSenders"in
    webkitRTCPeerConnection.prototype&&(k=!0);a.isRTPSenderReplaceTracksSupported=k;k=!1;a.browser.isFirefox&&38<a.browser.version&&(k=!0);a.isRemoteStreamProcessingSupported=k;k=!1;"undefined"!==typeof MediaStreamTrack&&"applyConstraints"in MediaStreamTrack.prototype&&(k=!0);a.isApplyConstraintsSupported=k;k=!1;a.browser.isFirefox&&43<=a.browser.version&&(k=!0);a.isMultiMonitorScreenCapturingSupported=k;a.isPromisesSupported=!!("Promise"in window);a.version="1.4.1";"undefined"===typeof a&&(window.DetectRTC=
    {});k=window.MediaStream;"undefined"===typeof k&&"undefined"!==typeof webkitMediaStream&&(k=webkitMediaStream);a.MediaStream="undefined"!==typeof k&&"function"===typeof k?Object.keys(k.prototype):!1;a.MediaStreamTrack="undefined"!==typeof MediaStreamTrack?Object.keys(MediaStreamTrack.prototype):!1;k=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;a.RTCPeerConnection="undefined"!==typeof k?Object.keys(k.prototype):!1;window.DetectRTC=a;"undefined"!==typeof module&&
    (module.exports=a);"function"===typeof define&&define.amd&&define("DetectRTC",[],function(){return a})})();
    !function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.anime=e()}(this,function(){"use strict";var n={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},e={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},t=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],r={CSS:{},springs:{}};function a(n,e,t){return Math.min(Math.max(n,e),t)}function o(n,e){return n.indexOf(e)>-1}function u(n,e){return n.apply(null,e)}var i={arr:function(n){return Array.isArray(n)},obj:function(n){return o(Object.prototype.toString.call(n),"Object")},pth:function(n){return i.obj(n)&&n.hasOwnProperty("totalLength")},svg:function(n){return n instanceof SVGElement},inp:function(n){return n instanceof HTMLInputElement},dom:function(n){return n.nodeType||i.svg(n)},str:function(n){return"string"==typeof n},fnc:function(n){return"function"==typeof n},und:function(n){return void 0===n},nil:function(n){return i.und(n)||null===n},hex:function(n){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(n)},rgb:function(n){return/^rgb/.test(n)},hsl:function(n){return/^hsl/.test(n)},col:function(n){return i.hex(n)||i.rgb(n)||i.hsl(n)},key:function(t){return!n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&"targets"!==t&&"keyframes"!==t}};function c(n){var e=/\(([^)]+)\)/.exec(n);return e?e[1].split(",").map(function(n){return parseFloat(n)}):[]}function s(n,e){var t=c(n),o=a(i.und(t[0])?1:t[0],.1,100),u=a(i.und(t[1])?100:t[1],.1,100),s=a(i.und(t[2])?10:t[2],.1,100),f=a(i.und(t[3])?0:t[3],.1,100),l=Math.sqrt(u/o),d=s/(2*Math.sqrt(u*o)),p=d<1?l*Math.sqrt(1-d*d):0,v=1,h=d<1?(d*l-f)/p:-f+l;function g(n){var t=e?e*n/1e3:n;return t=d<1?Math.exp(-t*d*l)*(v*Math.cos(p*t)+h*Math.sin(p*t)):(v+h*t)*Math.exp(-t*l),0===n||1===n?n:1-t}return e?g:function(){var e=r.springs[n];if(e)return e;for(var t=0,a=0;;)if(1===g(t+=1/6)){if(++a>=16)break}else a=0;var o=t*(1/6)*1e3;return r.springs[n]=o,o}}function f(n){return void 0===n&&(n=10),function(e){return Math.ceil(a(e,1e-6,1)*n)*(1/n)}}var l,d,p=function(){var n=11,e=1/(n-1);function t(n,e){return 1-3*e+3*n}function r(n,e){return 3*e-6*n}function a(n){return 3*n}function o(n,e,o){return((t(e,o)*n+r(e,o))*n+a(e))*n}function u(n,e,o){return 3*t(e,o)*n*n+2*r(e,o)*n+a(e)}return function(t,r,a,i){if(0<=t&&t<=1&&0<=a&&a<=1){var c=new Float32Array(n);if(t!==r||a!==i)for(var s=0;s<n;++s)c[s]=o(s*e,t,a);return function(n){return t===r&&a===i?n:0===n||1===n?n:o(f(n),r,i)}}function f(r){for(var i=0,s=1,f=n-1;s!==f&&c[s]<=r;++s)i+=e;var l=i+(r-c[--s])/(c[s+1]-c[s])*e,d=u(l,t,a);return d>=.001?function(n,e,t,r){for(var a=0;a<4;++a){var i=u(e,t,r);if(0===i)return e;e-=(o(e,t,r)-n)/i}return e}(r,l,t,a):0===d?l:function(n,e,t,r,a){for(var u,i,c=0;(u=o(i=e+(t-e)/2,r,a)-n)>0?t=i:e=i,Math.abs(u)>1e-7&&++c<10;);return i}(r,i,i+e,t,a)}}}(),v=(l={linear:function(){return function(n){return n}}},d={Sine:function(){return function(n){return 1-Math.cos(n*Math.PI/2)}},Circ:function(){return function(n){return 1-Math.sqrt(1-n*n)}},Back:function(){return function(n){return n*n*(3*n-2)}},Bounce:function(){return function(n){for(var e,t=4;n<((e=Math.pow(2,--t))-1)/11;);return 1/Math.pow(4,3-t)-7.5625*Math.pow((3*e-2)/22-n,2)}},Elastic:function(n,e){void 0===n&&(n=1),void 0===e&&(e=.5);var t=a(n,1,10),r=a(e,.1,2);return function(n){return 0===n||1===n?n:-t*Math.pow(2,10*(n-1))*Math.sin((n-1-r/(2*Math.PI)*Math.asin(1/t))*(2*Math.PI)/r)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach(function(n,e){d[n]=function(){return function(n){return Math.pow(n,e+2)}}}),Object.keys(d).forEach(function(n){var e=d[n];l["easeIn"+n]=e,l["easeOut"+n]=function(n,t){return function(r){return 1-e(n,t)(1-r)}},l["easeInOut"+n]=function(n,t){return function(r){return r<.5?e(n,t)(2*r)/2:1-e(n,t)(-2*r+2)/2}},l["easeOutIn"+n]=function(n,t){return function(r){return r<.5?(1-e(n,t)(1-2*r))/2:(e(n,t)(2*r-1)+1)/2}}}),l);function h(n,e){if(i.fnc(n))return n;var t=n.split("(")[0],r=v[t],a=c(n);switch(t){case"spring":return s(n,e);case"cubicBezier":return u(p,a);case"steps":return u(f,a);default:return u(r,a)}}function g(n){try{return document.querySelectorAll(n)}catch(n){return}}function m(n,e){for(var t=n.length,r=arguments.length>=2?arguments[1]:void 0,a=[],o=0;o<t;o++)if(o in n){var u=n[o];e.call(r,u,o,n)&&a.push(u)}return a}function y(n){return n.reduce(function(n,e){return n.concat(i.arr(e)?y(e):e)},[])}function b(n){return i.arr(n)?n:(i.str(n)&&(n=g(n)||n),n instanceof NodeList||n instanceof HTMLCollection?[].slice.call(n):[n])}function M(n,e){return n.some(function(n){return n===e})}function x(n){var e={};for(var t in n)e[t]=n[t];return e}function w(n,e){var t=x(n);for(var r in n)t[r]=e.hasOwnProperty(r)?e[r]:n[r];return t}function k(n,e){var t=x(n);for(var r in e)t[r]=i.und(n[r])?e[r]:n[r];return t}function O(n){return i.rgb(n)?(t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e=n))?"rgba("+t[1]+",1)":e:i.hex(n)?(r=n.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(n,e,t,r){return e+e+t+t+r+r}),a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),"rgba("+parseInt(a[1],16)+","+parseInt(a[2],16)+","+parseInt(a[3],16)+",1)"):i.hsl(n)?function(n){var e,t,r,a=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(n),o=parseInt(a[1],10)/360,u=parseInt(a[2],10)/100,i=parseInt(a[3],10)/100,c=a[4]||1;function s(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n}if(0==u)e=t=r=i;else{var f=i<.5?i*(1+u):i+u-i*u,l=2*i-f;e=s(l,f,o+1/3),t=s(l,f,o),r=s(l,f,o-1/3)}return"rgba("+255*e+","+255*t+","+255*r+","+c+")"}(n):void 0;var e,t,r,a}function C(n){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(n);if(e)return e[1]}function P(n,e){return i.fnc(n)?n(e.target,e.id,e.total):n}function I(n,e){return n.getAttribute(e)}function D(n,e,t){if(M([t,"deg","rad","turn"],C(e)))return e;var a=r.CSS[e+t];if(!i.und(a))return a;var o=document.createElement(n.tagName),u=n.parentNode&&n.parentNode!==document?n.parentNode:document.body;u.appendChild(o),o.style.position="absolute",o.style.width=100+t;var c=100/o.offsetWidth;u.removeChild(o);var s=c*parseFloat(e);return r.CSS[e+t]=s,s}function B(n,e,t){if(e in n.style){var r=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),a=n.style[e]||getComputedStyle(n).getPropertyValue(r)||"0";return t?D(n,a,t):a}}function T(n,e){return i.dom(n)&&!i.inp(n)&&(!i.nil(I(n,e))||i.svg(n)&&n[e])?"attribute":i.dom(n)&&M(t,e)?"transform":i.dom(n)&&"transform"!==e&&B(n,e)?"css":null!=n[e]?"object":void 0}function E(n){if(i.dom(n)){for(var e,t=n.style.transform||"",r=/(\w+)\(([^)]*)\)/g,a=new Map;e=r.exec(t);)a.set(e[1],e[2]);return a}}function F(n,e,t,r){var a,u=o(e,"scale")?1:0+(o(a=e,"translate")||"perspective"===a?"px":o(a,"rotate")||o(a,"skew")?"deg":void 0),i=E(n).get(e)||u;return t&&(t.transforms.list.set(e,i),t.transforms.last=e),r?D(n,i,r):i}function A(n,e,t,r){switch(T(n,e)){case"transform":return F(n,e,r,t);case"css":return B(n,e,t);case"attribute":return I(n,e);default:return n[e]||0}}function N(n,e){var t=/^(\*=|\+=|-=)/.exec(n);if(!t)return n;var r=C(n)||0,a=parseFloat(e),o=parseFloat(n.replace(t[0],""));switch(t[0][0]){case"+":return a+o+r;case"-":return a-o+r;case"*":return a*o+r}}function S(n,e){if(i.col(n))return O(n);if(/\s/g.test(n))return n;var t=C(n),r=t?n.substr(0,n.length-t.length):n;return e?r+e:r}function L(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function j(n){for(var e,t=n.points,r=0,a=0;a<t.numberOfItems;a++){var o=t.getItem(a);a>0&&(r+=L(e,o)),e=o}return r}function q(n){if(n.getTotalLength)return n.getTotalLength();switch(n.tagName.toLowerCase()){case"circle":return o=n,2*Math.PI*I(o,"r");case"rect":return 2*I(a=n,"width")+2*I(a,"height");case"line":return L({x:I(r=n,"x1"),y:I(r,"y1")},{x:I(r,"x2"),y:I(r,"y2")});case"polyline":return j(n);case"polygon":return t=(e=n).points,j(e)+L(t.getItem(t.numberOfItems-1),t.getItem(0))}var e,t,r,a,o}function H(n,e){var t=e||{},r=t.el||function(n){for(var e=n.parentNode;i.svg(e)&&i.svg(e.parentNode);)e=e.parentNode;return e}(n),a=r.getBoundingClientRect(),o=I(r,"viewBox"),u=a.width,c=a.height,s=t.viewBox||(o?o.split(" "):[0,0,u,c]);return{el:r,viewBox:s,x:s[0]/1,y:s[1]/1,w:u,h:c,vW:s[2],vH:s[3]}}function V(n,e,t){function r(t){void 0===t&&(t=0);var r=e+t>=1?e+t:0;return n.el.getPointAtLength(r)}var a=H(n.el,n.svg),o=r(),u=r(-1),i=r(1),c=t?1:a.w/a.vW,s=t?1:a.h/a.vH;switch(n.property){case"x":return(o.x-a.x)*c;case"y":return(o.y-a.y)*s;case"angle":return 180*Math.atan2(i.y-u.y,i.x-u.x)/Math.PI}}function $(n,e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=S(i.pth(n)?n.totalLength:n,e)+"";return{original:r,numbers:r.match(t)?r.match(t).map(Number):[0],strings:i.str(n)||e?r.split(t):[]}}function W(n){return m(n?y(i.arr(n)?n.map(b):b(n)):[],function(n,e,t){return t.indexOf(n)===e})}function X(n){var e=W(n);return e.map(function(n,t){return{target:n,id:t,total:e.length,transforms:{list:E(n)}}})}function Y(n,e){var t=x(e);if(/^spring/.test(t.easing)&&(t.duration=s(t.easing)),i.arr(n)){var r=n.length;2===r&&!i.obj(n[0])?n={value:n}:i.fnc(e.duration)||(t.duration=e.duration/r)}var a=i.arr(n)?n:[n];return a.map(function(n,t){var r=i.obj(n)&&!i.pth(n)?n:{value:n};return i.und(r.delay)&&(r.delay=t?0:e.delay),i.und(r.endDelay)&&(r.endDelay=t===a.length-1?e.endDelay:0),r}).map(function(n){return k(n,t)})}function Z(n,e){var t=[],r=e.keyframes;for(var a in r&&(e=k(function(n){for(var e=m(y(n.map(function(n){return Object.keys(n)})),function(n){return i.key(n)}).reduce(function(n,e){return n.indexOf(e)<0&&n.push(e),n},[]),t={},r=function(r){var a=e[r];t[a]=n.map(function(n){var e={};for(var t in n)i.key(t)?t==a&&(e.value=n[t]):e[t]=n[t];return e})},a=0;a<e.length;a++)r(a);return t}(r),e)),e)i.key(a)&&t.push({name:a,tweens:Y(e[a],n)});return t}function G(n,e){var t;return n.tweens.map(function(r){var a=function(n,e){var t={};for(var r in n){var a=P(n[r],e);i.arr(a)&&1===(a=a.map(function(n){return P(n,e)})).length&&(a=a[0]),t[r]=a}return t.duration=parseFloat(t.duration),t.delay=parseFloat(t.delay),t}(r,e),o=a.value,u=i.arr(o)?o[1]:o,c=C(u),s=A(e.target,n.name,c,e),f=t?t.to.original:s,l=i.arr(o)?o[0]:f,d=C(l)||C(s),p=c||d;return i.und(u)&&(u=f),a.from=$(l,p),a.to=$(N(u,l),p),a.start=t?t.end:0,a.end=a.start+a.delay+a.duration+a.endDelay,a.easing=h(a.easing,a.duration),a.isPath=i.pth(o),a.isPathTargetInsideSVG=a.isPath&&i.svg(e.target),a.isColor=i.col(a.from.original),a.isColor&&(a.round=1),t=a,a})}var Q={css:function(n,e,t){return n.style[e]=t},attribute:function(n,e,t){return n.setAttribute(e,t)},object:function(n,e,t){return n[e]=t},transform:function(n,e,t,r,a){if(r.list.set(e,t),e===r.last||a){var o="";r.list.forEach(function(n,e){o+=e+"("+n+") "}),n.style.transform=o}}};function z(n,e){X(n).forEach(function(n){for(var t in e){var r=P(e[t],n),a=n.target,o=C(r),u=A(a,t,o,n),i=N(S(r,o||C(u)),u),c=T(a,t);Q[c](a,t,i,n.transforms,!0)}})}function _(n,e){return m(y(n.map(function(n){return e.map(function(e){return function(n,e){var t=T(n.target,e.name);if(t){var r=G(e,n),a=r[r.length-1];return{type:t,property:e.name,animatable:n,tweens:r,duration:a.end,delay:r[0].delay,endDelay:a.endDelay}}}(n,e)})})),function(n){return!i.und(n)})}function R(n,e){var t=n.length,r=function(n){return n.timelineOffset?n.timelineOffset:0},a={};return a.duration=t?Math.max.apply(Math,n.map(function(n){return r(n)+n.duration})):e.duration,a.delay=t?Math.min.apply(Math,n.map(function(n){return r(n)+n.delay})):e.delay,a.endDelay=t?a.duration-Math.max.apply(Math,n.map(function(n){return r(n)+n.duration-n.endDelay})):e.endDelay,a}var J=0;var K=[],U=function(){var n;function e(t){for(var r=K.length,a=0;a<r;){var o=K[a];o.paused?(K.splice(a,1),r--):(o.tick(t),a++)}n=a>0?requestAnimationFrame(e):void 0}return"undefined"!=typeof document&&document.addEventListener("visibilitychange",function(){en.suspendWhenDocumentHidden&&(nn()?n=cancelAnimationFrame(n):(K.forEach(function(n){return n._onDocumentVisibility()}),U()))}),function(){n||nn()&&en.suspendWhenDocumentHidden||!(K.length>0)||(n=requestAnimationFrame(e))}}();function nn(){return!!document&&document.hidden}function en(t){void 0===t&&(t={});var r,o=0,u=0,i=0,c=0,s=null;function f(n){var e=window.Promise&&new Promise(function(n){return s=n});return n.finished=e,e}var l,d,p,v,h,g,y,b,M=(d=w(n,l=t),p=w(e,l),v=Z(p,l),h=X(l.targets),g=_(h,v),y=R(g,p),b=J,J++,k(d,{id:b,children:[],animatables:h,animations:g,duration:y.duration,delay:y.delay,endDelay:y.endDelay}));f(M);function x(){var n=M.direction;"alternate"!==n&&(M.direction="normal"!==n?"normal":"reverse"),M.reversed=!M.reversed,r.forEach(function(n){return n.reversed=M.reversed})}function O(n){return M.reversed?M.duration-n:n}function C(){o=0,u=O(M.currentTime)*(1/en.speed)}function P(n,e){e&&e.seek(n-e.timelineOffset)}function I(n){for(var e=0,t=M.animations,r=t.length;e<r;){var o=t[e],u=o.animatable,i=o.tweens,c=i.length-1,s=i[c];c&&(s=m(i,function(e){return n<e.end})[0]||s);for(var f=a(n-s.start-s.delay,0,s.duration)/s.duration,l=isNaN(f)?1:s.easing(f),d=s.to.strings,p=s.round,v=[],h=s.to.numbers.length,g=void 0,y=0;y<h;y++){var b=void 0,x=s.to.numbers[y],w=s.from.numbers[y]||0;b=s.isPath?V(s.value,l*x,s.isPathTargetInsideSVG):w+l*(x-w),p&&(s.isColor&&y>2||(b=Math.round(b*p)/p)),v.push(b)}var k=d.length;if(k){g=d[0];for(var O=0;O<k;O++){d[O];var C=d[O+1],P=v[O];isNaN(P)||(g+=C?P+C:P+" ")}}else g=v[0];Q[o.type](u.target,o.property,g,u.transforms),o.currentValue=g,e++}}function D(n){M[n]&&!M.passThrough&&M[n](M)}function B(n){var e=M.duration,t=M.delay,l=e-M.endDelay,d=O(n);M.progress=a(d/e*100,0,100),M.reversePlayback=d<M.currentTime,r&&function(n){if(M.reversePlayback)for(var e=c;e--;)P(n,r[e]);else for(var t=0;t<c;t++)P(n,r[t])}(d),!M.began&&M.currentTime>0&&(M.began=!0,D("begin")),!M.loopBegan&&M.currentTime>0&&(M.loopBegan=!0,D("loopBegin")),d<=t&&0!==M.currentTime&&I(0),(d>=l&&M.currentTime!==e||!e)&&I(e),d>t&&d<l?(M.changeBegan||(M.changeBegan=!0,M.changeCompleted=!1,D("changeBegin")),D("change"),I(d)):M.changeBegan&&(M.changeCompleted=!0,M.changeBegan=!1,D("changeComplete")),M.currentTime=a(d,0,e),M.began&&D("update"),n>=e&&(u=0,M.remaining&&!0!==M.remaining&&M.remaining--,M.remaining?(o=i,D("loopComplete"),M.loopBegan=!1,"alternate"===M.direction&&x()):(M.paused=!0,M.completed||(M.completed=!0,D("loopComplete"),D("complete"),!M.passThrough&&"Promise"in window&&(s(),f(M)))))}return M.reset=function(){var n=M.direction;M.passThrough=!1,M.currentTime=0,M.progress=0,M.paused=!0,M.began=!1,M.loopBegan=!1,M.changeBegan=!1,M.completed=!1,M.changeCompleted=!1,M.reversePlayback=!1,M.reversed="reverse"===n,M.remaining=M.loop,r=M.children;for(var e=c=r.length;e--;)M.children[e].reset();(M.reversed&&!0!==M.loop||"alternate"===n&&1===M.loop)&&M.remaining++,I(M.reversed?M.duration:0)},M._onDocumentVisibility=C,M.set=function(n,e){return z(n,e),M},M.tick=function(n){i=n,o||(o=i),B((i+(u-o))*en.speed)},M.seek=function(n){B(O(n))},M.pause=function(){M.paused=!0,C()},M.play=function(){M.paused&&(M.completed&&M.reset(),M.paused=!1,K.push(M),C(),U())},M.reverse=function(){x(),M.completed=!M.reversed,C()},M.restart=function(){M.reset(),M.play()},M.remove=function(n){rn(W(n),M)},M.reset(),M.autoplay&&M.play(),M}function tn(n,e){for(var t=e.length;t--;)M(n,e[t].animatable.target)&&e.splice(t,1)}function rn(n,e){var t=e.animations,r=e.children;tn(n,t);for(var a=r.length;a--;){var o=r[a],u=o.animations;tn(n,u),u.length||o.children.length||r.splice(a,1)}t.length||r.length||e.pause()}return en.version="3.2.1",en.speed=1,en.suspendWhenDocumentHidden=!0,en.running=K,en.remove=function(n){for(var e=W(n),t=K.length;t--;)rn(e,K[t])},en.get=A,en.set=z,en.convertPx=D,en.path=function(n,e){var t=i.str(n)?g(n)[0]:n,r=e||100;return function(n){return{property:n,el:t,svg:H(t),totalLength:q(t)*(r/100)}}},en.setDashoffset=function(n){var e=q(n);return n.setAttribute("stroke-dasharray",e),e},en.stagger=function(n,e){void 0===e&&(e={});var t=e.direction||"normal",r=e.easing?h(e.easing):null,a=e.grid,o=e.axis,u=e.from||0,c="first"===u,s="center"===u,f="last"===u,l=i.arr(n),d=l?parseFloat(n[0]):parseFloat(n),p=l?parseFloat(n[1]):0,v=C(l?n[1]:n)||0,g=e.start||0+(l?d:0),m=[],y=0;return function(n,e,i){if(c&&(u=0),s&&(u=(i-1)/2),f&&(u=i-1),!m.length){for(var h=0;h<i;h++){if(a){var b=s?(a[0]-1)/2:u%a[0],M=s?(a[1]-1)/2:Math.floor(u/a[0]),x=b-h%a[0],w=M-Math.floor(h/a[0]),k=Math.sqrt(x*x+w*w);"x"===o&&(k=-x),"y"===o&&(k=-w),m.push(k)}else m.push(Math.abs(u-h));y=Math.max.apply(Math,m)}r&&(m=m.map(function(n){return r(n/y)*y})),"reverse"===t&&(m=m.map(function(n){return o?n<0?-1*n:-n:Math.abs(y-n)}))}return g+(l?(p-d)/y:d)*(Math.round(100*m[e])/100)+v}},en.timeline=function(n){void 0===n&&(n={});var t=en(n);return t.duration=0,t.add=function(r,a){var o=K.indexOf(t),u=t.children;function c(n){n.passThrough=!0}o>-1&&K.splice(o,1);for(var s=0;s<u.length;s++)c(u[s]);var f=k(r,w(e,n));f.targets=f.targets||n.targets;var l=t.duration;f.autoplay=!1,f.direction=t.direction,f.timelineOffset=i.und(a)?l:N(a,l),c(t),t.seek(f.timelineOffset);var d=en(f);c(d),u.push(d);var p=R(u,n);return t.delay=p.delay,t.endDelay=p.endDelay,t.duration=p.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},en.easing=h,en.penner=v,en.random=function(n,e){return Math.floor(Math.random()*(e-n+1))+n},en});
    var cc=cc||{};
cc.defineGetterSetter=function(a,b,c,d,e,f){if(a.__defineGetter__)c&&a.__defineGetter__(b,c),d&&a.__defineSetter__(b,d);else if(Object.defineProperty){var h={enumerable:!1,configurable:!0};c&&(h.get=c);d&&(h.set=d);Object.defineProperty(a,b,h)}else throw Error("browser does not support getters");if(!e&&!f){h=null!=c;for(var r=void 0!=d,l=Object.getOwnPropertyNames(a),g=0;g<l.length;g++){var k=l[g];if((a.__lookupGetter__?!a.__lookupGetter__(k):!Object.getOwnPropertyDescriptor(a,k))&&"function"===typeof a[k]){var t=
a[k];if(h&&t===c&&(e=k,!r||f))break;if(r&&t===d&&(f=k,!h||e))break}}}a=a.constructor;e&&(a.__getters__||(a.__getters__={}),a.__getters__[e]=b);f&&(a.__setters__||(a.__setters__={}),a.__setters__[f]=b)};cc.clone=function(a){var b=a.constructor?new a.constructor:{},c;for(c in a){var d=a[c];b[c]="object"!==typeof d||!d||d instanceof cc.Node||d instanceof HTMLElement?d:cc.clone(d)}return b};cc.inject=function(a,b){for(var c in a)b[c]=a[c]};
var ClassManager=function(){var a=0|998*Math.random(),b=0|998*Math.random();this.getNewID=function(){return a++};this.getNewInstanceId=function(){return b++}},classManager=new ClassManager;
(function(){var a=/\b_super\b/;cc.Class=function(){};cc.Class.extend=function(b){cc.isEmpty(b._html)||cc["import"](b._html);cc.isEmpty(b._css)||cc["import"](b._css);var c=this.prototype,d=Object.create(c),e={writable:!0,enumerable:!1,configurable:!0};var f=function(m,n,p,u,x){this.__instanceId=classManager.getNewInstanceId();if(this.ctor)switch(arguments.length){case 0:this.ctor();break;case 1:this.ctor(m);break;case 2:this.ctor(m,n);break;case 3:this.ctor(m,n,p);break;case 4:this.ctor(m,n,p,u);break;
case 5:this.ctor(m,n,p,u,x);break;default:this.ctor.apply(this,arguments)}};e.value=classManager.getNewID();Object.defineProperty(d,"__pid",e);f.prototype=d;e.value=f;Object.defineProperty(d,"constructor",e);this.__getters__&&(f.__getters__=cc.clone(this.__getters__));this.__setters__&&(f.__setters__=cc.clone(this.__setters__));for(var h=0,r=arguments.length;h<r;++h){var l=arguments[h],g;for(g in l){var k="function"===typeof l[g],t="function"===typeof c[g],y=a.test(l[g]);k&&t&&y?(e.value=function(m,
n){return function(){var p=this._super;this._super=c[m];var u=n.apply(this,arguments);this._super=p;return u}}(g,l[g]),Object.defineProperty(d,g,e)):k?(e.value=l[g],Object.defineProperty(d,g,e)):d[g]=l[g];if(k){if(this.__getters__&&this.__getters__[g]){k=this.__getters__[g];for(var q in this.__setters__)if(this.__setters__[q]===k){var v=q;break}cc.defineGetterSetter(d,k,l[g],l[v]?l[v]:d[v],g,v)}if(this.__setters__&&this.__setters__[g]){k=this.__setters__[g];for(q in this.__getters__)if(this.__getters__[q]===
k){var w=q;break}cc.defineGetterSetter(d,k,l[w]?l[w]:d[w],l[g],w,g)}}}}f.extend=cc.Class.extend;f.implement=function(m){for(var n in m)d[n]=m[n]};return f}})();cc.each=function(a,b,c){if(a)if(a instanceof Array)for(var d=0,e=a.length;d<e&&!1!==b.call(c,a[d],d);d++);else for(d in a)if(!1===b.call(c,a[d],d))break};cc.extend=function(a){var b=2<=arguments.length?Array.prototype.slice.call(arguments,1):[];cc.each(b,function(c){for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])});return a};
cc.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a};cc.isFunction=function(a){return"function"===typeof a};cc.isNumber=function(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)};cc.isString=function(a){return"string"===typeof a||"[object String]"===Object.prototype.toString.call(a)};cc.isArray=function(a){return Array.isArray(a)||"object"===typeof a&&"[object Array]"===Object.prototype.toString.call(a)};
cc.isUndefined=function(a){return"undefined"===typeof a};cc.isObject=function(a){return"object"===typeof a&&"[object Object]"===Object.prototype.toString.call(a)};cc.objToArray=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};cc.localLog={maxLog:20,isLocalStorage:localStorage?!0:!1,push:function(a){},send:function(a,b){}};cc.log=function(a){var b=(new Date).toISOString();a=b.substr(b.length-13,13)+"--"+a;console.log(a)};
cc.isEmpty=function(a){return void 0==a||null==a||""==a.toString()?!0:!1};String.prototype.replaceAll=function(a,b){return this.replace(new RegExp(a,"g"),b)};cc.Class.prototype.addCEventListener=function(a,b,c){null==this.arrEventCb&&(this.arrEventCb=[]);for(var d=!1,e=0;e<this.arrEventCb.length;e++)if(this.arrEventCb[e].ev==a&&this.arrEventCb[e].cb==b&&this.arrEventCb[e].caller==c){d=!0;break}d||this.arrEventCb.push({ev:a,cb:b,caller:c})};
cc.Class.prototype.removeCEventListener=function(a,b,c){null==this.arrEventCb&&(this.arrEventCb=[]);for(var d=0;d<this.arrEventCb.length;d++)if(this.arrEventCb[d].ev==a&&this.arrEventCb[d].cb==b&&c==this.arrEventCb[d].caller){this.arrEventCb.splice(d,1);break}};cc.Class.prototype.CEventCallback=function(a){if(null!=this.arrEventCb)for(var b=this.arrEventCb.concat(),c=0;c<b.length;c++)b[c].ev==a&&b[c].cb.apply(b[c].caller,arguments)};
cc.Class.prototype.dispath=function(a){if(null!=this.arrEventCb)for(var b=this.arrEventCb.concat(),c=0;c<b.length;c++)b[c].ev==a&&b[c].cb.apply(b[c].caller,arguments)};cc.Class.prototype.removeAllCEventListener=function(a){if(null==a)null!=this.arrEventCb&&(this.arrEventCb=[]);else if(null!=this.arrEventCb&&void 0!=this.arrEventCb){do{var b=!1;for(var c=0;c<this.arrEventCb.length;c++)if(this.arrEventCb[c].ev==a){this.arrEventCb.splice(c,1);b=!0;break}}while(b)}};
cc.os=function(){var a=navigator.userAgent.toLowerCase(),b=/iphone|ipod|ipad/.test(a);return/android/.test(a)?"android":b?"ios":"pc"};cc.isMobile=function(){return"android"==cc.os||"ios"==cc.os?!0:!1};cc.isWebview=function(){return"zaloWebview"==cc.browserName||"fbWebview"==cc.browserName||"webview"==cc.browserName?!0:!1};
cc.browserName=function(){var a=navigator.userAgent.toLowerCase();if(0<=a.indexOf("zalo"))return"zaloWebview";if(0<=a.indexOf("FBAV"))return"fbWebview";if(0<=a.indexOf("webview"))return"webview";if(0<=a.indexOf("coccoc"))return"coccoc";var b=!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),c="undefined"!==typeof InstallTrigger,d=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!==typeof safari&&window.safari.pushNotification).toString();
0<=a.indexOf("safari")&&(d=!0);a=!!document.documentMode;var e=!a&&!!window.StyleMedia,f=-1!=navigator.userAgent.indexOf("Chrome"),h=f&&-1!=navigator.userAgent.indexOf("Edg");return b?"opera":d?"safari":c?"firefox":e?"edge":a?"ie":f?"chrome":h?"edgeChrome":"other"};cc.touchable=function(){return"ontouchstart"in window||navigator.msMaxTouchPoints};
cc.webrtcSupport=function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.enumerateDevices&&"undefined"!=typeof RTCPeerConnection?!0:!1};cc.mediaRecorderSupport=function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&window.MediaRecorder?!0:!1};cc.workerSupport=function(){return"undefined"!==typeof Worker?!0:!1};
cc.fullscreenSupport=function(){var a=document.body;return"undefined"!==typeof a.requestFullscreen||"undefined"!==typeof a.mozRequestFullScreen||"undefined"!==typeof a.webkitRequestFullscreen||"undefined"!==typeof a.msRequestFullscreen||"undefined"!==typeof document.exitFullscreen||"undefined"!==typeof document.mozCancelFullScreen||"undefined"!==typeof document.webkitExitFullscreen};cc.removeAllChildNodes=function(a){if(a)for(;a.firstChild;)a.removeChild(a.firstChild)};
cc.removeDomAttr=function(a,b){if(cc.isArray(b)&&a&&a instanceof HTMLElement)for(var c=0;c<b.length;c++)a.removeAttribute(b[c])};cc.getAttrToNumber=function(a,b){return Number(a.getAttribute(b))};cc.createGrid=function(a,b){if(0>=a||0>=b)return null;for(var c=document.createElement("div"),d=100/a,e=100/b,f=0;f<a*b;f++){var h=document.createElement("div");h.style.width=e+"%";h.style.height=d+"%";h.style.position="relative";h.style["float"]="left";h.setAttribute("grid",f);c.appendChild(h)}return c};
cc.dragDom=null;cc.winSize=function(){return{width:window.innerWidth,height:window.innerHeight}};cc.getParameterByName=function(a,b){b=void 0===b?window.location.href:b;a=a.replace(/[\[\]]/g,"\\$&");var c=(new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)")).exec(b);return c?c[2]?decodeURIComponent(c[2].replace(/\+/g," ")):"":null};cc.appVer=.1;
cc.loadCss=function(a){for(var b=0;b<a.length;b++){var c=document.getElementsByTagName("HEAD")[0],d=document.createElement("link");d.rel="stylesheet";d.type="text/css";d.href=a[b]+"?ver="+cc.appVer;c.appendChild(d)}};cc.insertCss=function(a){var b=document.createElement("style");b.type="text/css";b.innerHTML=a;document.getElementsByTagName("head")[0].appendChild(b)};
cc.getText=function(a,b){if(a)try{var c=new XMLHttpRequest;c.onreadystatechange=function(){4==this.readyState&&(200==this.status?b&&b(!0,this.responseText):b(!1,this.status))};c.open("GET",a+"?ver="+cc.appVer);c.send()}catch(d){b(!1,d.toString())}};
cc.getJson=function(a,b){if(a)try{var c=new XMLHttpRequest;c.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){if(b)try{b(!0,JSON.parse(this.responseText))}catch(d){b(!1,"error parse json result "+this.responseText)}}else b(!1,this.status)};c.open("GET",a+"?ver="+cc.appVer);c.send()}catch(d){b(!1,d.toString())}};
cc.loadJs=function(a,b,c){cc.isString(a)&&(a=[a]);if(!cc.isNumber(c)||0>c)c=0;if(a&&cc.isArray(a))if(a.length<=c)b&&b.call(null,!0);else{var d=a[c],e=document.createElement("script");e.onload=function(){c<a.length&&(c++,cc.loadJs(a,b,c))};e.onerror=function(){b&&b.call(null,!1)};e.src=d+"?ver="+cc.appVer;e.async=!0;document.body.appendChild(e)}};
cc.loadHtml=function(a,b,c){if(!cc.isNumber(c)||0>c)c=0;a&&cc.isArray(a)&&(a.length<=c?b&&b.call(null,!0):cc.getText(a[c],function(d,e){d&&(cc.htmlImport[a[c]]=e);c++;cc.loadHtml(a,b,c)}))};cc.jsfw=[];cc.coreready=null;cc.callbackready=null;cc.onready=function(a){null==cc.coreready?cc.callbackready=a:a.call(null,cc.coreready)};cc.loadJs(cc.jsfw,function(a){cc.coreready=a;cc.callbackready&&cc.callbackready.call(null,cc.coreready)});cc.htmlImport={};cc.cssImport={};
cc.getHtml=function(a){return cc.htmlImport[a]?cc.htmlImport[a]:""};cc["import"]=function(a){0<a.indexOf(".css")&&(cc.cssImport[a]||(cc.cssImport[a]=a));0<a.indexOf(".html")&&(cc.htmlImport[a]||(cc.htmlImport[a]=a))};cc.initApp=function(a,b){cc.loadJs(a,function(c){cc.loadCss(cc.objToArray(cc.cssImport));cc.loadHtml(cc.objToArray(cc.htmlImport),function(){b&&b()})})};cc.keywordNotStyle=["element","_childStyle","state"];
cc.Node=cc.Class.extend({_name:"",_lcid:0,_countChild:0,_render:null,_children:null,_parent:null,_style:null,_nodeType:"Node",ctor:function(a){this._initRender(a);a&&this.css(a)},_initRender:function(a){a||(a={});cc.isEmpty(a.element)&&(a.element=cc.getHtml(this._html));if(!cc.isEmpty(a.element)){if(cc.isString(a.element))try{var b=document.createElement("div");b.innerHTML=a.element.trim();var c=b.firstChild;if(c&&1==c.nodeType){this._render=c;this._render.setAttribute("_nt",this.getType());return}}catch(d){cc.log("error create element from  html :"+
a.element+":"+this._idLocal+":"+this.getType())}if(a.element instanceof HTMLElement){this._render=a.element;this._render.setAttribute("_nt",this.getType());return}}this._render=document.createElement("div");this._render.setAttribute("_nt",this.getType())},appendTo:function(a){a instanceof HTMLElement&&a.appendChild(this._render)},addChild:function(a){a._nodeType&&this._render&&a._render instanceof HTMLElement&&(this._render.appendChild(a._render),this._children=this._children||{},a._lcid=this._countChild++,
this._children[a._lcid]=a,a._parent=this)},removeChild:function(a,b){a._parent&&a._parent._render&&a._parent._render.removeChild(a._render);delete this._children[a._idNode];b&&a.release&&a.release()},removeAllChild:function(){for(var a in this._children)this.removeChild(this._children[a])},children:function(){var a=[],b;for(b in this._children)a.push(this._children);return a},getParent:function(){return this._parent},getRender:function(){return this._render},getChildrenByName:function(a){if(cc.isEmpty(a))return null;
for(var b in this._children)if(this._children[b].name==a)return this._children[b]},getChildByLcId:function(a){return!cc.isNumber(a)||0>Number(a)?null:this._children[a]?this._children[a]:null},toObject:function(){},fromObject:function(a){this._countChild=a.countChild?a.countChild:this._countChild},getType:function(){return this._nodeType},_release:function(){this.removeAllChild();this._render=null;this.removeAllCEventListener()},cssChild:function(a){if(this._render)for(var b in a){var c=this._render.getChildrenByName(b);
if(c)for(var d=0;d<c.length;d++)this.cssDom(c[d],a[b])}},css:function(a,b){if(!this._render||!this._render.style)return!1;this._style=this._style||{};var c=!0;if(cc.isString(a)){if(!b)return this._render.style[a];0>cc.keywordNotStyle.indexOf(a)&&(a=this._replaceCssProperties(a),this._render.style[a]=b,this._render.style[a]==b?this._style[a]=b:c=!1)}else{a=this._replaceCssProperties(a);for(var d in a)0>cc.keywordNotStyle.indexOf(d)?(this._render.style[d]=a[d],this._render.style[d]==a[d]?this._style[d]=
a[d]:c=!1):"_childStyle"==d&&this.cssChild(a[d])}""!=this._render.style.display&&"none"!=this._render.style.display&&(this._render.style.cdisplay=this._render.style.display);if(this._style.scaleX||this._style.scaleY||this._style.rotation)d="",this._style.rotation&&(d+="rotate("+this._style.rotation+"deg) "),this._style.scaleX&&(d+="scaleX("+this._style.scaleX+") "),this._style.scaleY&&(d+="scaleY("+this._style.scaleY+") "),this._render.style.transform=d;return c},cssDom:function(a,b,c){if(cc.isString(b))b=
this._replaceCssProperties(b),a.style[b]=c;else{b=this._replaceCssProperties(b);for(var d in b)a.style[d]=b[d]}},_replaceCssProperties:function(a){cc.isObject(a)&&(void 0!=a.x&&(a.left=a.x),void 0!=a.y&&(a.top=a.y),void 0!=a.rotate&&(a.rotation=a.rotate),delete a.x,delete a.y);if(cc.isString(a)){if("x"==a)return"left";if("y"==a)return"top";if("rotate"==a)return"ratation"}return a},_renderStyle:function(){return this._render&&this._render.style?this._render.style:null},setWidth:function(a){return this._renderStyle()?
cc.isString(a)?this.css("width",a):!cc.isNumber(a)||0>Number(a)?!1:this.css("width",a+"px"):!1},getWidth:function(){return this._renderStyle()?parseInt(this._render.style.width):0},setHeight:function(a){return this._renderStyle()?cc.isString(a)?this.css("height",a):!cc.isNumber(a)||0>Number(a)?!1:this.css("height",a+"px"):!1},getHeight:function(){return this._renderStyle()?parseInt(this._render.style.height):0},setX:function(a){return this._renderStyle()&&cc.isNumber(a)?this.css("left",a+"px"):!1},
getX:function(){return this._renderStyle()?parseInt(this._render.style.left):0},setY:function(a){return this._renderStyle()&&cc.isNumber(a)?this.css("top",a+"px"):!1},getY:function(){return this._renderStyle()?parseInt(this._render.style.top):0},getClientBoudingBox:function(){return this._render&&this._render.getClientBoudingBox?this._render.getClientBoudingBox():null},setVisible:function(a){this._renderStyle()&&(this._render.style.display=a?cc.isUndefined(this._render.style.cdisplay)?"":this._render.style.cdisplay:
"none")},getVisible:function(){return this._renderStyle()?"none"==this._render.style.display?!0:!1:!1},setColor:function(a){return this._renderStyle()?this.css("color",a):!1},getColor:function(){return this._renderStyle()?this._render.style.color.toString():""},setOpacity:function(a){return this._renderStyle()?this.css("opacity",a):!1},getOpacity:function(){return this._renderStyle()&&cc.isNumber(this._render.style.opacity)?this._render.style.opacity:1},setRotate:function(a){return!this._renderStyle()||
!cc.isNumber(a)||0>Number(a)?!1:this.css("rotation",a)},getRotate:function(){return this._renderStyle()&&this._style.rotation?this._style.rotation:0},setScaleX:function(a){return this._renderStyle()&&cc.isNumber(a)?this.css("scaleX",a):!1},getScaleX:function(){return this._renderStyle()&&this._style.scaleX?this._style.scaleX:1},setScaleY:function(a){return this._renderStyle()&&cc.isNumber(a)?this.css("scaleY",a):!1},getScaleY:function(){return this._renderStyle()&&this._style.scaleY?this._style.scaleY:
1},setScale:function(a,b){this.setScaleX(a);this.setScaleY(b)},setButtonMode:function(a){if(!this._renderStyle())return!1;a?this.css("cursor","pointer"):this.css("cursor","default")},anim:function(a,b,c,d){cc.isObject(a)||cc.isArray(a)?this.animFromTo(null,a,b,c,d):cc.isString(a)&&this._render&&(a=cc.animePattern.getFromTo(a,this))&&(b&&(a.to.duration=b),this.animFromTo(a.from,a.to,b,c,d))},animFromTo:function(a,b,c,d,e){if(this._render&&b&&(cc.isArray(b)||cc.isObject(b))){d&&"true"==d.toString().trim()||
(d=!1);e||(e="normal");try{this.stopAnim();this.timeline=anime.timeline({targets:this._render,loop:d,duration:Number(c),direction:e});a&&cc.isObject(a)&&(a=this._replaceCssProperties(a),this.timeline._from=a,this.css(a));if(cc.isArray(b))for(a=0;a<b.length;a++)b[a]=this._replaceCssProperties(b[a]),this.timeline.add(b[a]);else cc.isObject(b)&&(b=this._replaceCssProperties(b),this.timeline.add(b));this.timeline._animto=b}catch(f){cc.log("runAnim error "+f.message)}}},stopAnimToEnd:function(){this.timeline&&
this.timeline.pause();anime.remove(this._render);for(var a=0;a<this.timeline._animto.length;a++){var b=this.timeline._animto[a];delete b.targets;delete b.easing;delete b.duration;delete b.delay;delete b.endDelay;delete b.round;this.css(b)}delete this.timeline._from;delete this.timeline._timelines},stopAnim:function(){this.timeline&&(this.timeline.pause(),anime.remove(this._render),delete this.timeline._from,delete this.timeline._timelines)},addTouchStart:function(a){this.addDomTouchStart(this._render,
a)},removeTouchStart:function(){this.removeDomTouchStart(this._render)},addDomTouchStart:function(a,b){var c=this;a.touchStartEnabled=!0;a.addEventListener("mousedown",function(d){c._onDomDown(d,b)});a.addEventListener("touchstart",function(d){c._onDomDown(d,b);d.preventDefault()})},_onDomDown:function(a,b){if(a.currentTarget.touchStartEnabled){var c=a.touches&&0<a.touches.length?a.touches[0]:a,d=a.currentTarget;c.target=d==this._render?this:d;c.time=(new Date).getTime();cc.removeDomAttr(d,"move_time move_pageX move_pageY move_clientX move_clientY end_time".split(" "));
d.setAttribute("start_time",c.time);d.setAttribute("start_pageX",c.pageX);d.setAttribute("start_pageY",c.pageY);d.setAttribute("start_clientX",c.clientX);d.setAttribute("start_clientY",c.clientY);_windowUp();d.dragEnabled&&(cc.dragDom=d,d.setAttribute("start_left",parseInt(d.style.left)),d.setAttribute("start_top",parseInt(d.style.top)),window.addEventListener("mousemove",_windowMove),window.addEventListener("touchmove",_windowMove),window.addEventListener("mouseup",_windowUp),window.addEventListener("touchend",
_windowUp));b&&b(c)}},removeDomTouchStart:function(a){a.dragEnabled||(a.touchStartEnabled=!1)},addTouchMove:function(a){this.addDomTouchMove(this._render,a)},removeTouchMove:function(){this.removeDomTouchMove(this._render)},addDomTouchMove:function(a,b){var c=this;a.touchMoveEnabled=!0;a.addEventListener("mousemove",function(d){c._onDomMove(d,b)});a.addEventListener("touchmove",function(d){c._onDomMove(d,b);d.preventDefault()})},_onDomMove:function(a,b){if(a.currentTarget.touchMoveEnabled){var c=
a.touches&&0<a.touches.length?a.touches[0]:a,d=a.currentTarget;c.target=d==this._render?this:d;c.time=(new Date).getTime();d.setAttribute("move_time",c.time);d.setAttribute("move_pageX",c.pageX);d.setAttribute("move_pageY",c.pageY);d.setAttribute("move_clientX",c.clientX);d.setAttribute("move_clientY",c.clientY);b&&b(c)}},removeDomTouchMove:function(a){a.touchMoveEnabled=!1},addTouchOut:function(a){this.addDomTouchOut(this._render,a)},removeTouchOut:function(){this.removeDomTouchOut(this._render)},
addDomTouchOut:function(a,b){var c=this;a.touchOutEnabled=!0;a.addEventListener("mouseout",function(d){c._onDomOut(d,b)})},_onDomOut:function(a,b){if(a.target.touchOutEnabled){var c=a.touches&&0<a.touches.length?a.touches[0]:a,d=a.currentTarget;c.target=d==this._render?this:d;c.time=(new Date).getTime();b&&b(c)}},removeDomTouchOut:function(a){a.touchOutEnabled=!1},addTouchEnd:function(a){this.addDomTouchEnd(this._render,a)},removeTouchEnd:function(){this.removeDomTouchEnd(this._render)},addDomTouchEnd:function(a,
b){var c=this;a.touchEndEnabled=!0;a.addEventListener("mouseup",function(d){c._onDomEnd(d,b)});a.addEventListener("touchend",function(d){c._onDomEnd(d,b);d.preventDefault()})},_onDomEnd:function(a,b){if(a.currentTarget.touchEndEnabled){var c=a.touches&&0<a.touches.length?a.touches[0]:a,d=a.currentTarget;c.target=d==this._render?this:d;c.time=(new Date).getTime();d.setAttribute("end_time",c.time);b&&b(c);this._onDomTap(d);cc.removeDomAttr(d,"move_time move_pageX move_pageY move_clientX move_clientY end_time".split(" "));
cc.removeDomAttr(d,["start_time","start_pageX","start_pageY","start_clientX","start_clientY"])}},removeDomTouchEnd:function(a){a.touchEndEnabled=!1},addTouch:function(a){this.addTouchTap(a)},removeTouch:function(){this.removeTouchTap()},addDomTouch:function(a,b){this.addDomTouchTap(a,b)},addTouchTap:function(a){this.addDomTouchTap(this._render,a)},removeTouchTap:function(){this.removeDomTouchTap(this._render)},addDomTouchTap:function(a,b){a.touchStartEnabled||this.addDomTouchStart(a);a.touchEndEnabled||
this.addDomTouchEnd(a);a.touchTapEnabled=!0;a.callbacksTap=a.callbacksTap||[];b&&a.callbacksTap.push(b)},_onDomTap:function(a){a.getAttribute("move_pageX")||a.setAttribute("move_pageX",a.getAttribute("start_pageX"));a.getAttribute("move_pageY")||a.setAttribute("move_pageY",a.getAttribute("start_pageY"));if(150>cc.getAttrToNumber(a,"end_time")-cc.getAttrToNumber(a,"start_time")&&10>Math.abs(cc.getAttrToNumber(a,"start_pageX")-cc.getAttrToNumber(a,"move_pageX"))&&10>Math.abs(cc.getAttrToNumber(a,"start_pageY")-
cc.getAttrToNumber(a,"move_pageY"))){if(a.getAttribute("tap_time")&&200>(new Date).getTime()-cc.getAttrToNumber(a,"tap_time")){if(a.callbacksDoubleTap)for(var b=0;b<a.callbacksDoubleTap.length;b++)a.callbacksDoubleTap[b].call(null,{target:a==this._render?this._render:a})}else if(a.callbacksTap)for(b=0;b<a.callbacksTap.length;b++)a.callbacksTap[b].call(null,{target:a==this._render?this._render:a});a.setAttribute("tap_time",(new Date).getTime())}},removeDomTouchTap:function(a){a.callbacksTap&&(a.touchTapEnabled=
!1,a.callbacksTap=null,delete a.callbacksTap)},addTouchDouble:function(a){this.addDomTouchDoubleTap(this._render,a)},addTouchDoubleTap:function(a){this.addDomTouchDoubleTap(this._render,a)},removeTouchDoubleTap:function(){this.removeDomTouchDoubleTap(this._render)},addDomTouchDoubleTap:function(a,b){a.touchTapEnabled||this.addDomTouchTap(a);a.touchDoubleTapEnable=!0;a.callbacksDoubleTap=a.callbacksDoubleTap||[];b&&a.callbacksDoubleTap.push(b)},removeDomTouchDoubleTap:function(a){a.callbacksDoubleTap&&
(a.touchDoubleTapEnable=!1,a.callbacksDoubleTap=null,delete a.callbacksDoubleTap)},_dragEnabled:!1,setDragEnabled:function(a){this._render&&(this.setDragEnabledDom(this._render,a),this._dragEnabled=a)},getDragEnabled:function(){return this._dragEnabled},setDragEnabledDom:function(a,b){b&&!a.touchStartEnabled&&this.addDomTouchStart(a);a.dragEnabled=!!b},findDom:function(a){var b=this,c=null;if(!a)return null;a instanceof HTMLElement?c=a:cc.isString(a)&&(c=this._render.querySelector(a));c._ccinit||
(c._ccinit=!0,c.css=function(d,e){if(cc.isString(d))c.style[d]=e;else if(cc.isObject(d))for(var f in d)c.style[f]=d[f]},c.getBoxGrid=function(d){return b.findDom(c.querySelector("[grid='"+d+"']"))},c.addTouch=function(d){b.addDomTouchTap(c,d)},c.removeTouch=function(){b.removeDomTouchTap(c)},c.addTouchStart=function(d){b.addDomTouchStart(c,d)},c.removeTouchStart=function(){b.removeDomTouchStart(c)},c.addTouchMove=function(d){b.addDomTouchMove(c,d)},c.removeTouchMove=function(){b.removeDomTouchMove(c)},
c.addTouchOut=function(d){b.addDomTouchOut(c,d)},c.removeTouchOut=function(){b.removeDomTouchOut(c)},c.addTouchEnd=function(d){b.addDomTouchEnd(c,d)},c.removeTouchEnd=function(){b.removeDomTouchEnd(c)},c.addTouchDouble=function(d){b.addDomTouchDoubleTap(c,d)},c.removeTouchDouble=function(){b.removeDomTouchDoubleTap(c)});return c},findAllDom:function(a){}});cc.Node.fromObject=function(a){return cc.Node().fromObject(a)};var _p=cc.Node.prototype;cc.defineGetterSetter(_p,"parent",_p.getParent,_p.getParent);
cc.defineGetterSetter(_p,"render",_p.getRender,_p.getRender);cc.defineGetterSetter(_p,"width",_p.getWidth,_p.setWidth);cc.defineGetterSetter(_p,"height",_p.getHeight,_p.setHeight);cc.defineGetterSetter(_p,"x",_p.getX,_p.setX);cc.defineGetterSetter(_p,"left",_p.getX,_p.setX);cc.defineGetterSetter(_p,"y",_p.getY,_p.setY);cc.defineGetterSetter(_p,"top",_p.getY,_p.setY);cc.defineGetterSetter(_p,"visible",_p.getVisible,_p.setVisible);cc.defineGetterSetter(_p,"opacity",_p.getOpacity,_p.setOpacity);
cc.defineGetterSetter(_p,"color",_p.getColor,_p.setColor);cc.defineGetterSetter(_p,"scale",_p.getScale,_p.getScale);cc.defineGetterSetter(_p,"scaleX",_p.getScaleX,_p.setScaleX);cc.defineGetterSetter(_p,"scaleY",_p.getScaleY,_p.setScaleY);cc.defineGetterSetter(_p,"rotate",_p.getRotate,_p.setRotate);cc.defineGetterSetter(_p,"buttonMode",_p.setButtonMode,_p.setButtonMode);cc.defineGetterSetter(_p,"anchorX",_p.getAnchorX,_p.setAnchorX);cc.defineGetterSetter(_p,"anchorY",_p.getAnchorY,_p.setAnchorY);
cc.defineGetterSetter(_p,"touchEnabled",_p.getTouchEnabled,_p.setTouchEnabled);cc.defineGetterSetter(_p,"dragEnabled",_p.getDragEnabled,_p.setDragEnabled);
function _windowMove(a){var b=a.touches&&0<a.touches.length?a.touches[0]:a;a=cc.dragDom;var c=b.pageX-cc.getAttrToNumber(a,"start_pageX");b=b.pageY-cc.getAttrToNumber(a,"start_pageY");a==this._render?(this.x=c+cc.getAttrToNumber(a,"start_left"),this.y=b+cc.getAttrToNumber(a,"start_top")):(a.style.left=c+cc.getAttrToNumber(a,"start_left")+"px",a.style.top=b+cc.getAttrToNumber(a,"start_top")+"px")}
function _windowUp(a){window.removeEventListener("mousemove",_windowMove);window.removeEventListener("touchmove",_windowMove);window.removeEventListener("mouseup",_windowUp);window.removeEventListener("touchend",_windowUp);cc.dragDom&&cc.dragDom.removeAttribute("start_left");cc.dragDom&&cc.dragDom.removeAttribute("start_top");cc.dragDom&&cc.removeDomAttr(cc.dragDom,["start_time","start_pageX","start_pageY","start_clientX","start_clientY"]);cc.dragDom=null};


var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};
$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in d))return;d=d[g]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&(c=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+c+"$"+e),$jscomp.defineProperty(d,$jscomp.propertyToPolyfillSymbol[e],{configurable:!0,writable:!0,value:b})))};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};
$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};
$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype["return"]=function(a){this.abruptCompletion_={"return":a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){var c=$jscomp.makeIterator(a),d=c.next();$jscomp.generator.ensureIteratorResultIsObject_(d);if(d.done)this.yieldResult=d.value,this.nextAddress=b;else return this.yieldAllIterator_=c,this.yield(d.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){var c=this.finallyContexts_.splice(b||0)[0];if(c=this.abruptCompletion_=this.abruptCompletion_||c){if(c.isException)return this.jumpToErrorHandler_();void 0!=c.jumpTo&&this.finallyAddress_<c.jumpTo?(this.nextAddress=c.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(c){return{value:c,done:!0}},a,this.context_["return"]);this.context_["return"](a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var d=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(d);if(!d.done)return this.context_.stop_(),d;var e=d.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,e);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a["return"],done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this["throw"]=function(b){return a.throw_(b)};this["return"]=function(b){return a.return_(b)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){var c=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&a.prototype&&$jscomp.setPrototypeOf(c,a.prototype);return c};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(d){return a.next(d)}function c(d){return a["throw"](d)}return new Promise(function(d,e){function f(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(f,e)}f(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};
$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in d))return;d=d[g]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&(c=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+c+"$"+e),$jscomp.defineProperty(d,$jscomp.propertyToPolyfillSymbol[e],{configurable:!0,writable:!0,value:b})))};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};
$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};
$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype["return"]=function(a){this.abruptCompletion_={"return":a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){var c=$jscomp.makeIterator(a),d=c.next();$jscomp.generator.ensureIteratorResultIsObject_(d);if(d.done)this.yieldResult=d.value,this.nextAddress=b;else return this.yieldAllIterator_=c,this.yield(d.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){var c=this.finallyContexts_.splice(b||0)[0];if(c=this.abruptCompletion_=this.abruptCompletion_||c){if(c.isException)return this.jumpToErrorHandler_();void 0!=c.jumpTo&&this.finallyAddress_<c.jumpTo?(this.nextAddress=c.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(c){return{value:c,done:!0}},a,this.context_["return"]);this.context_["return"](a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var d=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(d);if(!d.done)return this.context_.stop_(),d;var e=d.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,e);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a["return"],done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this["throw"]=function(b){return a.throw_(b)};this["return"]=function(b){return a.return_(b)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){var c=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&a.prototype&&$jscomp.setPrototypeOf(c,a.prototype);return c};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(d){return a.next(d)}function c(d){return a["throw"](d)}return new Promise(function(d,e){function f(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(f,e)}f(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};

var aztExam=aztExam||{};
aztExam.RTCConnection=cc.Class.extend({conn:null,candidate:null,callback:null,isUsed:!1,remoteUserId:"",localUserId:"",type:"offer",monitor:null,offerTimestamp:-1,timeIntv:8E3,blacklistTimestamp:null,lasttimestamp:-1,isWaitingUploadOffer:!1,isWaitingUploadAnswer:!1,offer:null,answer:null,offerReceive:null,ctor:function(a){this.blacklistTimestamp=[];this.monitor=a;this.initUI()},initUI:function(){this.ui=document.createElement("div");this.ui.style.transformOrigin="0% 0%";this.ui.style.overflow="hidden";
this.uivideo=document.createElement("div");this.uivideo.style.width="100%";this.uivideo.style.height="100%";this.uivideo.style.display="flex";this.uivideo.style.flexDirection="row";this.uivideo.style.alignItems="center";this.uivideo.style.justifyContent="center";this.ui.appendChild(this.uivideo);this.txtConnecting=document.createElement("div");this.txtConnecting.style.backgroundColor="#333333";this.txtConnecting.style.width="250px";this.txtConnecting.style.padding="20px";this.txtConnecting.style.borderRadius=
"8px";this.txtConnecting.style.color="#EEEEEE";this.txtConnecting.style.fontSize="16px";this.txtConnecting.innerHTML=aztExam.lang.lbConnectingMedia;this.txtConnecting.style.position="absolute";this.txtConnecting.style.bottom="20px";this.txtConnecting.style.textAlign="center";this.txtConnecting.style.lineHeight="30px";this.ui.appendChild(this.txtConnecting)},resizeUI:function(a,b){this.ui.style.width=a+"px";this.ui.style.height=b+"px";this.txtConnecting.style.left=(a-260)/2+"px"},startIntv:function(){var a=
this,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress){cc.log("start intv");a.isStarted=!0;a.txtConnecting.style.display="block";if("offer"!=a.type)return clearInterval(a.ofIntv),a.ofIntv=setInterval(function(){a.getOfferIntv()},a.timeIntv),a.getOfferIntv(),d.jumpTo(0);b=(new Date).getTime();c=a;return d.yield(a.createOffer(),3)}c.offer=d.yieldResult;a.offer.timestamp=b;a.offer.conn=b;a.offer.userid=a.localUserId;a.isWaitingUploadOffer=!0;d.jumpToEnd()})},getAnswerIntv:function(){var a=
this,b=new XMLHttpRequest;b.onreadystatechange=function(){if(4==b.readyState&&200==b.status)try{var c=JSON.parse(b.responseText);c.timestamp==a.offerTimestamp&&(clearInterval(a.anIntv),a.receiveAnswer(c))}catch(d){cc.log("get answer error")}};b.open("GET",this.monitor._urlDownload+this.monitor.options.roomid+"/"+this.localUserId+"/answer.txt?t="+(new Date).getTime());b.send()},getOfferIntv:function(){var a=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){b=new XMLHttpRequest;
b.onreadystatechange=function(){if(4==b.readyState&&200==b.status)try{var d=JSON.parse(b.responseText);a.receiveOffer(d)}catch(e){cc.log("get offer error")}};b.open("GET",a.monitor._urlDownload+a.monitor.options.roomid+"/"+a.remoteUserId+"/offer.txt?t="+(new Date).getTime());b.send();c.jumpToEnd()})},start:function(a,b,c){cc.log("start");this.isUsed||!a||!b&&"offer"!=c||(this.reset(),this.localUserId=a,this.remoteUserId=b,this.type=c,this.initConn(),this.isUsed=!0,this.startIntv())},stop:function(){this.reset()},
initConn:function(){var a=this;cc.log("init connection ");this.conn=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});this.conn.addEventListener("icecandidate",function(b){return a.onIceCandidate(b)});this.conn.addEventListener("iceconnectionstatechange",function(b){return a.onIceStateChange(b)});this.monitor.stream&&this.addStream(this.monitor.stream);this.conn.ontrack=function(b){a.gotRemoteStream(b)}},createOffer:function(){var a=this,b,c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:if(!a.conn)return f["return"]();
f.setCatchFinallyBlocks(2);b={offerToReceiveAudio:1,offerToReceiveVideo:1};return f.yield(a.conn.createOffer(b),4);case 4:return c=f.yieldResult,a.conn.setLocalDescription(c),d={candidate:a.candidate,offer:c},f["return"](d);case 2:e=f.enterCatchBlock(),console.log("create offer error "+e);case 3:return f["return"](null)}})},receiveOffer:function(a){var b=this,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress){if(null==b.conn)return e.jumpTo(0);e.setCatchFinallyBlocks(3);
if(0<=b.blacklistTimestamp.indexOf(a.timestamp))return e["return"]();b.blacklistTimestamp.push(a.timestamp);clearInterval(b.ofIntv);b.offerReceive=a;b.conn.setRemoteDescription(b.offerReceive.offer);return e.yield(b.conn.createAnswer(),5)}if(3!=e.nextAddress)return c=e.yieldResult,b.conn.setLocalDescription(c),b.answer={candidate:b.candidate,answer:c,timestamp:a.timestamp},b.isWaitingUploadAnswer=!0,e.leaveTryBlock(0);d=e.enterCatchBlock();cc.log("receiveOffer error "+d);e.jumpToEnd()})},receiveAnswer:function(a){cc.log("receiveAnswer "+
JSON.stringify(a));if(null!=this.conn){this.conn.setRemoteDescription(a.answer);for(var b=0;b<a.candidate.length;b++)this.conn.addIceCandidate(a.candidate[b])}},addStream:function(a){var b=this;"offer"==this.type&&a.getTracks().forEach(function(c){cc.log("add track : ");b.conn.addTrack(c,a)})},gotRemoteStream:function(a){var b=this;cc.log("gotRemoteStream "+a.streams.length);if(0<a.streams.length){cc.removeAllChildNodes(this.uivideo);for(var c=0;c<a.streams.length;c++){var d=document.createElement("video");
this.uivideo.appendChild(d);d.playsInline=!0;d.muted=!0;d.srcObject=a.streams[c];d.vW=parseInt(this.ui.style.width);d.vH=parseInt(this.ui.style.height);d.onplay=function(){};d.onresize=function(){80<d.videoWidth&&60<d.videoHeight&&(b.txtConnecting.style.display="none",console.log("video size "+d.videoWidth+":"+d.videoHeight),d.videoWidth/d.videoHeight<d.vW/d.vH?(d.style.width="",d.style.height="100%"):(d.style.width="100%",d.style.height=""))};d.play()}}},updateBandwidthRestriction:function(a,b){return a=
-1===a.indexOf("b=AS:")?a.replace(/c=IN (.*)\r\n/,"c=IN $1\r\nb=AS:"+b+"\r\n"):a.replace(RegExp("b=AS:.*\r\n"),"b=AS:"+b+"\r\n")},onIceCandidate:function(a){var b=this;try{a&&a.candidate?(cc.log("onIceCandicate "+JSON.stringify(a.candidate)),this.candidate.push(a.candidate),clearInterval(this.iceIntv),this.iceIntv=setInterval(function(){clearInterval(b.iceIntv);b.onIceCandidateFinish()},3E3)):(cc.log("on ice null finish get candicate first time"),this.onIceCandidateFinish())}catch(c){cc.log("onIceCandidate exception "+
c.message)}},onIceCandidateFinish:function(){var a=this;this.isWaitingUploadOffer&&(this.isWaitingUploadOffer=!1,this.offer.candidate=this.candidate,this.monitor.uploadPublicContent(this.monitor._urlOffer,"offer.txt",JSON.stringify(this.offer),function(c,d){200==c&&(a.offerTimestamp=a.offer.timestamp,clearInterval(a.anIntv),a.anIntv=setInterval(function(){a.getAnswerIntv()},a.timeIntv))}));if(this.isWaitingUploadAnswer){this.isWaitingUploadAnswer=!1;this.answer.candidate=this.candidate;this.monitor.getPublicUpload(this.monitor.options.roomid,
this.remoteUserId,"answer.txt",function(c){""!=c&&a.monitor.uploadPublicContent(c,"answer.txt",JSON.stringify(a.answer),function(d,e){200==d&&cc.log("upload answer ok")})});for(var b=0;b<this.offerReceive.candidate.length;b++)this.conn.addIceCandidate(this.offerReceive.candidate[b])}},onIceStateChange:function(a){a=this.conn.iceConnectionState.toString();cc.log("onIceStateChange state "+a);if("failed"==a||"disconnected"==a||"closed"==a)this.isUsed=!1,this.start(this.localUserId,this.remoteUserId,
this.type)},reset:function(){null!=this.conn&&(this.conn.close(),this.conn=null);this.isStarted=this.isUsed=!1;this.type=this.localUserId=this.remoteUserId="";this.offerTimestamp=-1;this.isWaitingUploadOffer=this.isWaitingUploadAnswer=!1;this.answer=this.offerReceive=this.offer=null;this.candidate=[];clearInterval(this.anIntv);clearInterval(this.ofIntv);cc.removeAllChildNodes(this.uivideo)}});

var aztExam=aztExam||{};aztExam.icon={};
aztExam.svg={iconCheck:'<svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" focusable="false" class="style-scope iron-icon" style="pointer-events: none; display: block; width: 24px; height: 24px;"><g class="style-scope iron-icon"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" class="style-scope iron-icon"></path></g></svg>',iconWarning:'<?xml version="1.0" ?><svg  viewBox="0 0 64 64" style="pointer-events: none; display: block; width: 20px; height: 20px;" xmlns="http://www.w3.org/2000/svg"><defs><style>.cls-1{fill:#efcc00;}.cls-2{fill:#353535;}</style></defs><title/><path class="cls-1" d="M30.16,11.51,6.84,51.9a2.13,2.13,0,0,0,1.84,3.19H55.32a2.13,2.13,0,0,0,1.84-3.19L33.84,11.51A2.13,2.13,0,0,0,30.16,11.51Z"/><path class="cls-2" d="M29,46a3,3,0,1,1,3,3A2.88,2.88,0,0,1,29,46Zm1.09-4.66-.76-15h5.26l-.73,15Z"/></svg>',iconCameraOff:'<?xml version="1.0" ?><svg id="Icons" style="enable-background:new 0 0 32 32;" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style type="text/css">.st0{fill:none;stroke:#000000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}</style><g><path d="M22.5,20.9l5,3C27.6,24,27.8,24,28,24c0.2,0,0.3,0,0.5-0.1c0.3-0.2,0.5-0.5,0.5-0.9V9c0-0.4-0.2-0.7-0.5-0.9   c-0.3-0.2-0.7-0.2-1,0l-5,3C22.2,11.3,22,11.6,22,12v8C22,20.4,22.2,20.7,22.5,20.9z"/><path d="M29.7,28.3L20,18.6V11c0-1.7-1.3-3-3-3H9.4L3.7,2.3c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l26,26c0.2,0.2,0.5,0.3,0.7,0.3   s0.5-0.1,0.7-0.3C30.1,29.3,30.1,28.7,29.7,28.3z"/><path d="M3,11v10c0,1.7,1.3,3,3,3h11c0.8,0,1.5-0.3,2-0.8L4.3,8.5C3.5,9.1,3,10,3,11z"/></g></svg>',
iconCamera:'<?xml version="1.0" ?><svg id="Icons" style="enable-background:new 0 0 32 32;" version="1.1" viewBox="0 0 32 32" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style type="text/css">.st0{fill:none;stroke:#000000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}</style><g><path d="M17,8H6c-1.7,0-3,1.3-3,3v10c0,1.7,1.3,3,3,3h11c1.7,0,3-1.3,3-3V11C20,9.3,18.7,8,17,8z"/><path d="M28.5,8.1c-0.3-0.2-0.7-0.2-1,0l-5,3C22.2,11.3,22,11.6,22,12v8c0,0.4,0.2,0.7,0.5,0.9l5,3C27.6,24,27.8,24,28,24   c0.2,0,0.3,0,0.5-0.1c0.3-0.2,0.5-0.5,0.5-0.9V9C29,8.6,28.8,8.3,28.5,8.1z"/></g></svg>',
iconMicOff:'<?xml version="1.0" ?><svg  viewBox="0 0 48 48"  xmlns="http://www.w3.org/2000/svg"><path d="M0 0h48v48H0zm0 0h48v48H0z" fill="none"/><path d="M38 22h-3.4c0 1.49-.31 2.87-.87 4.1l2.46 2.46C37.33 26.61 38 24.38 38 22zm-8.03.33c0-.11.03-.22.03-.33V10c0-3.32-2.69-6-6-6s-6 2.68-6 6v.37l11.97 11.96zM8.55 6L6 8.55l12.02 12.02v1.44c0 3.31 2.67 6 5.98 6 .45 0 .88-.06 1.3-.15l3.32 3.32c-1.43.66-3 1.03-4.62 1.03-5.52 0-10.6-4.2-10.6-10.2H10c0 6.83 5.44 12.47 12 13.44V42h4v-6.56c1.81-.27 3.53-.9 5.08-1.81L39.45 42 42 39.46 8.55 6z"/></svg>',
iconMic:'<?xml version="1.0" ?><svg  viewBox="0 0 48 48"  xmlns="http://www.w3.org/2000/svg"><path d="M24 28c3.31 0 5.98-2.69 5.98-6L30 10c0-3.32-2.68-6-6-6-3.31 0-6 2.68-6 6v12c0 3.31 2.69 6 6 6zm10.6-6c0 6-5.07 10.2-10.6 10.2-5.52 0-10.6-4.2-10.6-10.2H10c0 6.83 5.44 12.47 12 13.44V42h4v-6.56c6.56-.97 12-6.61 12-13.44h-3.4z"/><path d="M0 0h48v48H0z" fill="none"/></svg>',iconRefresh:'<?xml version="1.0" ?><svg style="enable-background:new 0 0 30 30;" version="1.1" viewBox="0 0 30 30" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M22.143,23.365  C20.221,25.008,17.726,26,15,26C8.925,26,4,21.075,4,15" style="fill:none;stroke:#000000;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;"/><path d="M7.857,6.635  C9.779,4.992,12.274,4,15,4c6.075,0,11,4.925,11,11" style="fill:none;stroke:#000000;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;"/><polygon points="26,20 22,14 30,14 "/><polygon points="4,10 8,16 0,16 "/></svg>',
iconClose:'<?xml version="1.0" ?><svg  style="enable-background:new 0 0 612 792;" version="1.1" viewBox="0 0 612 792" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style type="text/css">.st0{clip-path:url(#SVGID_2_);fill:none;stroke:#E44061;stroke-width:45;}.st1{fill:#E44061;}</style><g><g><defs><rect height="512" width="512" x="50" y="140"/></defs><clipPath id="SVGID_2_"><use style="overflow:visible;" xlink:href="#SVGID_1_"/></clipPath><path class="st0" d="M306,629.5c128.8,0,233.5-104.7,233.5-233.5S434.8,162.5,306,162.5S72.5,267.2,72.5,396    S177.2,629.5,306,629.5L306,629.5z"/></g><polygon class="st1" points="348.7,396 448,296.7 405.3,254 306,353.3 206.7,254 164,296.7 263.3,396 164,495.3 206.7,538    306,438.7 405.3,538 448,495.3 348.7,396  "/></g></svg>'};
aztExam.lang={btDone:"XONG",btViewFull:"XEM TO\u00c0N B\u1ed8 L\u1edaP",btViewHistory:"XEM TH\u00d4NG TIN",btCopyLink:"COPY LINK",btBackToList:"DANH S\u00c1CH L\u1edaP",lbDeviceInfo:"TH\u00d4NG TIN THI\u1ebeT B\u1eca",lbOs:"H\u1ec7 \u0111i\u1ec1u h\u00e0nh",msgOsNotSupport:"Ch\u1ee9c n\u0103ng gi\u00e1m s\u00e1t h\u1ed7 tr\u1ee3 tr\u00ean c\u00e1c h\u1ec7 \u0111i\u1ec1u h\u00e0nh : iOS(iphone,ipad) , Android , Window , MAC_OS",msgTeacherOsNotSupport:"Ch\u1ee9c n\u0103ng gi\u00e1m s\u00e1t h\u1ed7 tr\u1ee3 tr\u00ean c\u00e1c h\u1ec7 \u0111i\u1ec1u h\u00e0nh : Window , MAC_OS",
lbBrowser:"Tr\u00ecnh duy\u1ec7t",msgBrowserNotSupportPc:"Ch\u1ee9c n\u0103ng gi\u00e1m s\u00e1t h\u1ed7 tr\u1ee3 phi\u00ean b\u1ea3n m\u1edbi nh\u1ea5tt tr\u00ecnh duy\u1ec7t Chrome,C\u1ed1c c\u1ed1c ,Microsoft Edge ,Firefox tr\u00ean m\u00e1y t\u00ednh",msgBrowserNotSupportAndroid:"Ch\u1ee9c n\u0103ng gi\u00e1m s\u00e1t h\u1ed7 tr\u1ee3 tr\u00ecnh duy\u1ec7t Chrome tr\u00ean h\u1ec7 \u0111i\u1ec1u h\u00e0nh Android .<br/> Copy link v\u00e0 m\u1edf b\u1eb1ng Chrome !",msgBrowserNotSupportIOs:"Ch\u1ee9c n\u0103ng gi\u00e1m s\u00e1t h\u1ed7 tr\u1ee3 tr\u00ecnh duy\u1ec7t Safari  tr\u00ean h\u1ec7 \u0111i\u1ec1u h\u00e0nh iOs .<br/> Copy link v\u00e0 m\u1edf b\u1eb1ng Safari !",
lbCamera:"Camera ",msgCameraNotFound:"Thi\u1ebft b\u1ecb kh\u00f4ng c\u00f3 camera.",msgCameraNotPermission:"Ch\u1ee9c n\u0103ng kh\u00f4ng \u0111\u01b0\u1ee3c c\u1ea5p quy\u1ec1n truy c\u1eadp Camera.<br/><br/><span style='font-style:italic'> Ch\u1ecdn bi\u1ec3u t\u01b0\u1ee3ng kho\u00e1 tr\u00ean \u0111\u1ea7u thanh \u0111\u1ecba ch\u1ec9 , c\u1ea5p quy\u1ec1n truy c\u1eadp camera , t\u1ea3i l\u1ea1i trang website</span>",msgCameraNotPermissionIos:"Ch\u1ee9c n\u0103ng kh\u00f4ng \u0111\u01b0\u1ee3c c\u1ea5p quy\u1ec1n truy c\u1eadp Camera .<br/><br/><span style='font-style:italic'>T\u1ea3i l\u1ea1i trang website , ch\u1ecdn cho ph\u00e9p truy c\u1eadp camera .</span>",
lbMic:"Microphone ",msgMicNotFound:"Thi\u1ebft b\u1ecb kh\u00f4ng c\u00f3 microphone",msgMicNotPermission:"Ch\u1ee9c n\u0103ng kh\u00f4ng \u0111\u01b0\u1ee3c c\u1ea5p quy\u1ec1n truy c\u1eadp Microphone.<br/><br/><span style='font-style:italic'> Ch\u1ecdn bi\u1ec3u t\u01b0\u1ee3ng kho\u00e1 tr\u00ean \u0111\u1ea7u thanh \u0111\u1ecba ch\u1ec9 , c\u1ea5p quy\u1ec1n truy c\u1eadp microphone , t\u1ea3i l\u1ea1i trang website</span>",msgMicNotPermissionIos:"Ch\u1ee9c n\u0103ng kh\u00f4ng \u0111\u01b0\u1ee3c c\u1ea5p quy\u1ec1n truy c\u1eadp Microphone.<br/><br/><span style='font-style:italic'>T\u1ea3i l\u1ea1i trang website , ch\u1ecdn cho ph\u00e9p truy c\u1eadp microphone .</span>",
lbTitleHistory:"TH\u00d4NG TIN C\u00c1 NH\u00c2N ",lbConnectingMedia:"\u0110ang k\u1ebft n\u1ed1i ... !"};

var aztExam=aztExam||{};
aztExam.monitor=cc.Node.extend({options:null,deviceInfo:null,_isStarted:!1,_numGetMediaUser:0,_isGettingMediaUser:!1,_imageCaptureWidth:192,_imageCaptureHeight:108,_streamType:-1,_urlCurr:"",_urlAnswer:"",_urlOffer:"",_urlDownload:"",ctor:function(){this.initUI();this.reset()},start:function(a){this._isStarted||(this._isStarted=!0,this.reset(),a&&cc.isNumber(a.imageCaptureWidth)&&(this._imageCaptureWidth=a.imageCaptureWidth),a&&cc.isNumber(a.imageCaptureHeight)&&(this._imageCaptureHeight=a.imageCaptureHeight),
a&&a.roomid&&cc.isString(a.roomid)&&(this.options.roomid=a.roomid),a&&a.time&&cc.isNumber(a.time)&&(this.options.time=a.time),a&&a.userlist&&cc.isArray(a.userlist)&&(this.options.userlist=a.userlist),a&&a.user&&(a.user.userid&&(this.options.user.userid=a.user.userid),a.user.role&&cc.isNumber(a.user.role)&&(this.options.user.role=a.user.role),a.user.name&&cc.isString(a.user.name)&&(this.options.user.role=a.user.name),a.user.token&&cc.isString(a.user.token)&&(this.options.user.token=a.user.token)),
a&&a.config&&(a.config.urlUpload&&(this.options.config.urlUpload=a.config.urlUpload),a.config.urlDownload&&(this.options.config.urlDownload=a.config.urlDownload)))},loop:function(){this._running||(this._running=!0,this.update(0))},stopLoop:function(){this._running=!1},reset:function(){this.options={};this.options.roomid="";this.options.time=-1;this.options.userlist=[];this.options.user={token:"",userid:"",role:0,name:""};this.options.config={currentFirstUpdateSize:2,currentUpdateSize:2,storeUpdateSize:8,
urlUpload:"/fileupload",urlDownload:"/upload/",urlRename:"/rename",urlGetPublicForLive:"https://api.beta.azota.vn/api/s3space/get_public_upload_url_for_live",urlGetListFileForLive:"https://beta.azota.vn/api/S3space/get_list_files_for_live",urlGetTokenForLive:"https://api.beta.azota.vn/api/s3space/get_token_for_live"};this.deviceInfo={}},showDeviceUI:function(a){var c=this;if(a){try{this.deviUI&&(document.body.removeChild(this.deviUI),this.deviUI=null)}catch(g){cc.log("error remove deviUI")}var d=
(window.innerWidth-20)/500;0==d&&(d=1);1<=d&&(d=1);var b=(window.innerHeight-50)/d;this.deviUI=this.findDom(document.createElement("div"));this.deviUI.css("position","absolute");this.deviUI.css("transform-origin","0% 0%");this.deviUI.css("transform","scale(0.01)");this.deviUI.css("width","500px");this.deviUI.css("height",Math.floor(b)+"px");this.deviUI.css("left",Math.floor((window.innerWidth-500*d)/2)+"px");this.deviUI.css("top",Math.floor((window.innerHeight-b*d)/2)+"px");this.deviUI.css("background-color",
"white");this.deviUI.css("font-family","sans-serif");this.deviUI.css("font-size","18px");this.deviUI.css("box-shadow","0 2px 2px 0 rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%), 0 1px 5px 0 rgb(0 0 0 / 20%)");this.deviUI.css("z-index",999999999);document.body.appendChild(this.deviUI);anime({targets:this.deviUI,scale:d,easing:"easeInOutExpo",duration:1E3});d=this.findDom(document.createElement("div"));d.css("width","100%");d.css("height","60px");d.css("border-bottom","1px solid #CCCCCC");this.deviUI.appendChild(d);
var f=this.findDom(document.createElement("span"));f.css("color","gray");f.css("display","flex");f.css("width","70%");f.css("height","100%");f.css("float","left");f.css("padding-left","20px");f.css("align-items","center");f.innerHTML=aztExam.lang.lbDeviceInfo;d.appendChild(f);this.btDone=this.createButton(100,40,aztExam.lang.btDone,"#1A84E3",16);this.btDone.css("float","right");this.btDone.css("margin-right","10px");this.btDone.css("margin-top","10px");d.appendChild(this.btDone);this.btDone.addTouch(function(g){anime({targets:c.deviUI,
scale:.01,easing:"easeInOutExpo",duration:500,complete:function(){c.deviUI.css("display","none")}})});d=this.findDom(document.createElement("div"));d.css("width","100%");d.css("height",b-60+"px");d.css("overflow-x","hidden");d.css("overflow-y","scroll");this.deviUI.appendChild(d);b=this.findDom(document.createElement("div"));b.css("width","100%");b.css("height","60px");b.css("margin-top","10px");b.css("background",a.osSupport?"#90ec90":"#ec9090");b.css("display","flex");b.css("align-items","center");
b.css("padding-left","20px");b.css("color","#333333");b.innerHTML=aztExam.lang.lbOs+" "+a.osName+"  "+a.osVersion;d.appendChild(b);b=this.findDom(document.createElement("div"));b.css("width","90%");b.css("height","auto");b.css("text-align","center");b.css("margin-top","10px");b.css("margin-left","5%");b.innerHTML="student"==this.role()?aztExam.lang.msgOsNotSupport:aztExam.lang.msgTeacherOsNotSupport;b.css("display",a.osSupport?"none":"block");d.appendChild(b);b=this.findDom(document.createElement("div"));
b.css("width","100%");b.css("height","60px");b.css("margin-top","10px");b.css("background",a.browserSupport?"#90ec90":"#ec9090");b.css("display","flex");b.css("align-items","center");b.css("padding-left","20px");b.css("color","#333333");b.css("white-space","nowrap");b.innerHTML=aztExam.lang.lbBrowser+" "+a.browser.name+" "+a.browser.version;d.appendChild(b);b=this.findDom(document.createElement("div"));b.css("width","90%");b.css("height","auto");b.css("text-align","center");b.css("margin-top","10px");
b.css("padding-left","5%");b.innerHTML=aztExam.lang.msgBrowserNotSupportPc;a.isAndroid?b.innerHTML=aztExam.lang.msgBrowserNotSupportAndroid:a.isIOs&&(b.innerHTML=aztExam.lang.msgBrowserNotSupportIOs);b.css("display",a.browserSupport?"none":"block");d.appendChild(b);a.browserSupport||!a.isIOs&&!a.isAndroid||(b=this.createButton(160,40,aztExam.lang.btCopyLink,"#1A84E3",16),b.css("margin-left","170px"),b.css("margin-top","10px"),b.css("display","flex"),d.appendChild(b));b=this.findDom(document.createElement("div"));
b.css("width","100%");b.css("height","60px");b.css("margin-top","10px");b.css("background",a.hasWebcam&&a.isWebsiteHasWebcamPermissions?"#90ec90":"#ec9090");b.css("display","flex");b.css("align-items","center");b.css("padding-left","20px");b.css("color","#333333");b.css("white-space","nowrap");b.innerHTML=aztExam.lang.lbCamera+" ("+a.videoInputDevices.length+")";d.appendChild(b);b=this.findDom(document.createElement("div"));b.css("width","90%");b.css("height","auto");b.css("text-align","center");
b.css("margin-top","10px");b.css("padding-left","5%");b.css("display",a.hasWebcam&&a.isWebsiteHasWebcamPermissions?"none":"block");a.hasWebcam?a.isWebsiteHasWebcamPermissions||(b.innerHTML=a.isIOs?aztExam.lang.msgCameraNotPermissionIos:aztExam.lang.msgCameraNotPermission):b.innerHTML=aztExam.lang.msgCameraNotFound;d.appendChild(b);if(a.isWebsiteHasWebcamPermissions){b=document.createElement("video");b.width=80;b.height=60;b.style.margin="10px";b.style["float"]="left";b.muted=!0;b.playsInline=!0;b.classList.add("azt_devi_video_preview");
this.stream&&(b.srcObject=this.stream,b.play());d.appendChild(b);var e=document.createElement("div");e.style.width="390px";e.style.height="auto";e.style["float"]="left";d.appendChild(e);b=a.videoInputDevices;for(f=0;f<b.length;f++){var h=this.createListCheck("azt_cam_item",f,b[f].label,f==this.deviceInfo.videoInputIndex?!0:!1,b[f]);h.addTouch(function(g){g=parseInt(g.target.getAttribute("azt_cam_item_index"));g!=c.deviceInfo.videoInputIndex&&c.getMediaUser(g,c.deviceInfo.audioInputIndex)});e.appendChild(h)}}b=
this.findDom(document.createElement("div"));b.css("width","100%");b.css("height","60px");b.css("margin-top","10px");b.css("background",a.hasMicrophone&&a.isWebsiteHasMicrophonePermissions?"#90ec90":"#ec9090");b.css("display","flex");b.css("align-items","center");b.css("padding-left","20px");b.css("color","#333333");b.css("white-space","nowrap");b.innerHTML=aztExam.lang.lbMic+" ("+a.audioInputDevices.length+")";d.appendChild(b);e=this.findDom(document.createElement("div"));e.css("width","90%");e.css("height",
"auto");e.css("text-align","center");e.css("margin-top","10px");e.css("padding-left","5%");e.css("padding-left","5%");e.css("display",a.hasMicrophone&&a.isWebsiteHasMicrophonePermissions?"none":"block");a.hasMicrophone?a.isWebsiteHasMicrophonePermissions||(e.innerHTML=a.isIOs?aztExam.lang.msgMicNotPermissionIos:aztExam.lang.msgMicNotPermission):e.innerHTML=aztExam.lang.msgMicNotFound;if(a.isWebsiteHasMicrophonePermissions)for(b=a.audioInputDevices,f=0;f<b.length;f++)h=this.createListCheck("azt_mic_item",
f,b[f].label,f==this.deviceInfo.audioInputIndex?!0:!1,b[f]),h.addTouch(function(g){g=parseInt(g.target.getAttribute("azt_mic_item_index"));g!=c.deviceInfo.audioInputIndex&&c.getMediaUser(c.deviceInfo.videoInputIndex,g)}),d.appendChild(h);d.appendChild(e)}},collectInfo:function(a){var c=this;DetectRTC.load(function(){c.deviceInfo.osName=DetectRTC.osName;c.deviceInfo.osVersion=DetectRTC.osVersion;c.deviceInfo.browser=DetectRTC.browser;c.deviceInfo.osSupport=c.checkOsSupport(c.deviceInfo);c.deviceInfo.browserSupport=
c.checkBrowserSuppor(c.deviceInfo);c.deviceInfo.hasWebcam=DetectRTC.hasWebcam;c.deviceInfo.hasMicrophone=DetectRTC.hasMicrophone;c.deviceInfo.isWebsiteHasWebcamPermissions=DetectRTC.isWebsiteHasWebcamPermissions;c.deviceInfo.isWebsiteHasMicrophonePermissions=DetectRTC.isWebsiteHasMicrophonePermissions;c.deviceInfo.isWebRTCSupported=DetectRTC.isWebRTCSupported;c.deviceInfo.videoInputDevices=DetectRTC.videoInputDevices;c.deviceInfo.audioInputDevices=DetectRTC.audioInputDevices;if(0==c._numGetMediaUser){if(!c.deviceInfo.osSupport||
!c.deviceInfo.browserSupport){c.showDeviceUI(c.deviceInfo);return}if("teacher"==c.role()){a&&a();return}DetectRTC.hasWebcam||DetectRTC.hasMicrophone?c.getMediaUser(DetectRTC.hasWebcam?0:-1,DetectRTC.hasMicrophone?0:-1):c.showDeviceUI(c.deviceInfo)}else if(1==c._numGetMediaUser)0>c._streamType&&c.showDeviceUI(c.deviceInfo);else if(c.deviUI){for(var d=c.deviUI.getElementsByClassName("azt_cam_item"),b=0;b<d.length;b++){var f=d[b].getElementsByClassName("check_icon");f[0].style.display=b==c.deviceInfo.videoInputIndex?
"block":"none"}d=c.deviUI.getElementsByClassName("azt_mic_item");for(b=0;b<d.length;b++)f=d[b].getElementsByClassName("check_icon"),f[0].style.display=b==c.deviceInfo.audioInputIndex?"block":"none"}a&&a()})},checkOsSupport:function(a){var c=a.osName.toLowerCase();if(0<=c.indexOf("window")||0<=c.indexOf("mac"))return a.isPc=!0;if("student"==this.role()){if(0<=c.indexOf("android"))return a.isAndroid=!0;if(0<=c.indexOf("ios")||c.indexOf("ipad"))return a.isIOs=!0}return!1},checkBrowserSuppor:function(a){var c=
a.osName.toLowerCase();a=a.browser.name.toLowerCase();if(0<=c.indexOf("window")||0<=c.indexOf("mac"))if(0<=a.indexOf("chrome")||0<=a.indexOf("edge")||0<=a.indexOf("firefox")||0<=a.indexOf("coccoc"))return!0;return"student"==this.role()&&(0<=c.indexOf("android")&&0<=a.indexOf("chrome")||(0<=c.indexOf("ios")||0<=c.indexOf("ipad"))&&0<=a.indexOf("safari"))?!0:!1},stopAllPreview:function(){this.stream&&this.stream.getTracks().forEach(function(a){a.stop()})},updateAllPreview:function(){if(this.deviUI){var a=
this.deviUI.getElementsByClassName("azt_devi_video_preview")[0];a&&this.stream&&(a.srcObject=this.stream,a.play())}this.stream&&this.videoReview&&(this.videoReview.srcObject=this.stream,this.videoReview.play())},getMediaUser:function(a,c){var d=this;if(!(0>a&&0>c||this._isGettingMediaUser||a>=this.deviceInfo.videoInputDevices.length||c>=this.deviceInfo.audioInputDevices.length)){var b=!1,f=!1;cc.log("get media user "+a+":"+c);if(0<=a){cc.log("video index");b=this.deviceInfo.videoInputDevices[a].deviceId;
var e=1280,h=720;this.isMobile()&&(e=640,h=480);b={deviceId:b?{exact:b}:void 0,frameRate:{min:12,max:12,ideal:12},width:{max:e,min:e,ideal:e},height:{max:h,min:h,ideal:h}};cc.log("video contrainst")}0<=c&&(cc.log("audio index"),f=this.deviceInfo.audioInputDevices[c].deviceId,f={deviceId:f?{exact:f}:void 0},cc.log("audio contrainst"));cc.log("media constraints "+JSON.stringify(b));this._isGettingMediaUser=!0;this.stopAllPreview();navigator.mediaDevices.getUserMedia({audio:f,video:b}).then(function(g){cc.log("ongetstream");
d.gotStream(g,a,c)}).then()["catch"](this.handleError)}},gotStream:function(a,c,d){cc.log("on getStream");this.deviceInfo.videoInputIndex=c;this.deviceInfo.audioInputIndex=d;this.stream=a;0<=c&&(this.videoWidth=this.stream.getVideoTracks()[0].getSettings().width,this.videoHeight=this.stream.getVideoTracks()[0].getSettings().height,this.videoHeight=0==this.videoHeight?240:this.videoHeight,this.videoWidth=0==this.videoWidth?320:this.videoWidth);0<=c&&0<=d?this._streamType=0:0<=c?this._streamType=1:
0<=d&&(this._streamType=2);this.updateAllPreview();this._numGetMediaUser++;this.collectInfo();this._isGettingMediaUser=!1},handleError:function(a){var c=aztExam.MonitorStudent.getInstance();cc.log("navigator.MediaDevices.getUserMedia error: ",a.message,a.name,c._numGetMediaUser);c._numGetMediaUser++;c.collectInfo();c._isGettingMediaUser=!1},update:function(a){},uploadContent:function(a,c,d,b){if(a&&c){d||(d=this.options.user.userid);c=new Blob([c],{type:"text/plain"});var f=new File([c],a),e=new XMLHttpRequest;
c=new FormData;c.append("file",f);a="roomid="+this.options.roomid+"&userid="+d+"&filename="+a;e.onreadystatechange=function(){4==this.readyState&&(cc.log("upload success"),b&&b(this.status,e.responseText))};e.open("POST",this.options.config.urlUpload+"?"+a);e.send(c)}},renameContent:function(a,c,d,b){if(a&&c){d||(d=this.options.user.userid);var f=new XMLHttpRequest;a="roomid="+this.options.roomid+"&userid="+d+"&filenameold="+a+"&filenamenew="+c;f.onreadystatechange=function(){4==this.readyState&&
b&&b(this.status,f.responseText)};f.open("POST",this.options.config.urlRename+"?"+a);f.send()}},getPublicUpload:function(a,c,d,b){var f=new XMLHttpRequest;a=encodeURI(this.options.config.urlGetPublicForLive+"?examHashId="+(a+"&userId="+c+"&file_name="+d+"&file_size=100000&minetype=text/plain"));f.open("GET",a);f.setRequestHeader("Authorization","Bearer "+this.options.user.token);f.onreadystatechange=function(){if(4==f.readyState&&200==f.status)try{var e=JSON.parse(f.responseText).data.upload_url,
h=JSON.parse(f.responseText).data.url;b(e,h)}catch(g){b("")}};f.send()},uploadPublicContent:function(a,c,d,b){d=new Blob([d],{type:"text/plain"});c=new File([d],c);d=new XMLHttpRequest;d.open("PUT",a);d.setRequestHeader("Content-Type","text/plain");d.setRequestHeader("x-amz-acl","public-read");d.onreadystatechange=function(){4==this.readyState&&b&&b(this.status,this.responseText)};d.send(c)},getTokenForLive:function(a,c){var d=new XMLHttpRequest,b=encodeURI(this.options.config.urlGetTokenForLive+
"?examHashId="+a);d.open("GET",b);d.setRequestHeader("Authorization","Bearer "+this.options.user.token);d.onreadystatechange=function(){if(4==d.readyState&&200==d.status)try{var f=JSON.parse(d.responseText).data;c(f)}catch(e){}};d.send()},getListFile:function(a,c){var d=new XMLHttpRequest,b=encodeURI(this.options.config.urlGetListFileForLive+"?examHashId="+(a+"&userId="+c));d.open("GET",b);d.setRequestHeader("Authorization","Bearer "+this.options.user.token);d.onreadystatechange=function(){if(4==
d.readyState&&200==d.status)try{cc.log("get list file  : "+d.responseText),callback(token)}catch(f){}};d.send()},createButton:function(a,c,d,b,f){var e=this.findDom(document.createElement("div"));e.css("border-radius","5px");e.css("width",a+"px");e.css("height",c+"px");e.css("background-color",b);e.css("display","flex");e.css("align-items","center");e.css("justify-content","center");e.css("color","white");e.css("cursor","pointer");e.css("font-size",f+"px");e.css("user-select","none");e.innerHTML=
d;return e},createListCheck:function(a,c,d,b,f){var e=this.findDom(document.createElement("div"));e.css("width","90%");e.css("margin-left","5%");e.css("height","50px");e.css("display","flex");e.css("align-items","center");e.css("justify-content","space-between");e.css("flex-direction","row");e.css("border-bottom","1px solid #AAAAAA");e.css("white-space","nowrap");e.css("cursor","pointer");e.classList.add(a);e.setAttribute(a+"_index",c);e.innerHTML=d;e.info=f;a=document.createElement("div");a.classList.add("check_icon");
a.innerHTML=aztExam.svg.iconCheck;a.style.display=b?"block":"none";e.appendChild(a);return e},getLocalStorage:function(a){try{if(localStorage)return localStorage.getItem(a)}catch(c){}cc.log("not support localStorage");return""},setLocalStorage:function(a,c){try{if(localStorage)return localStorage.setItem(a,c),!0}catch(d){}cc.log("not support localStorage");return!1},getParameterByName:function(a,c){c=void 0===c?window.location.href:c;a=a.replace(/[\[\]]/g,"\\$&");var d=(new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)")).exec(c);
return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null},hasWebcamStream:function(){return 0==this._streamType||1==this._streamType?!0:!1},hasMicrophoneStream:function(){return 0==this._streamType||2==this._streamType?!0:!1},isMobile:function(){return 0>this.deviceInfo.osName.toLowerCase().indexOf("window")&&0>this.deviceInfo.osName.toLowerCase().indexOf("mac")?!0:!1},role:function(){return""},version:function(){return"1.0"}});

var aztExam=aztExam||{};
aztExam.monitorStudent=aztExam.monitor.extend({_hasVideoReviewPlaying:!1,_hasExtentCamera:!1,_firstUpload:!0,_queueUpload:null,_uploadIntv:9E3,w:void 0,ctor:function(){this._super()},start:function(b){var a=this;this._super(b);this.initUrlUploadPublic(function(){cc.log("init url finish ");cc.log("url download "+a._urlDownload);cc.log("url upload offer "+a._urlOffer);cc.log("url upload curr "+a._urlCurr);a.collectInfo(function(){a.isMobile()?(a._imageCaptureHeight=120,a._imageCaptureWidth=90):(a._imageCaptureWidth=
142,a._imageCaptureHeight=80);a.previewWidth=b.config&&b.config.previewWidth?parseInt(b.config.previewWidth):a._imageCaptureWidth;a.previewHeight=b.config&&b.config.previewHeight?parseInt(b.config.previewHeight):a._imageCaptureHeight;a.preview.style.width=a.previewWidth+"px";a.preview.style.height=a.previewHeight+"px";var c=a.options.config;a.canvasPreview.width=a._imageCaptureWidth;a.canvasPreview.height=a._imageCaptureHeight;a.canvasDraw.width=c.storeUpdateSize*a._imageCaptureWidth;a.canvasDraw.height=
c.storeUpdateSize*a._imageCaptureHeight;a.canvasDraw.cols=c.storeUpdateSize;a.canvasDraw.rows=c.storeUpdateSize;a.canvasDraw.imageWidth=a._imageCaptureWidth;a.canvasDraw.imageHeight=a._imageCaptureHeight;a.canvasDrawCurr.width=c.currentFirstUpdateSize*a._imageCaptureWidth;a.canvasDrawCurr.height=c.currentFirstUpdateSize*a._imageCaptureHeight;a.canvasDrawCurr.cols=c.currentFirstUpdateSize;a.canvasDrawCurr.rows=c.currentFirstUpdateSize;a.canvasDrawCurr.imageWidth=a._imageCaptureWidth;a.canvasDrawCurr.imageHeight=
a._imageCaptureHeight;a._uploadIntv=c.currentFirstUpdateSize*c.currentFirstUpdateSize*1E3+1;a.loop()})})},reset:function(){this._super();this._firstUpload=!0;this._hasVideoReviewPlaying=this._hasExtentCamera=!1;this._queueUpload=[]},initUI:function(){var b=this;this.preview=this.findDom(document.createElement("div"));this.preview.style.overflow="hidden";this.preview.style.borderRadius="8px";this.preview.style.backgroundColor="gray";this.preview.style.position="absolute";this.preview.style.left="0px";
this.preview.style.top="0px";this.preview.style.transformOrigin="0% 0%";this.preview.style.width=this._imageCaptureWidth+"px";this.preview.style.height=this._imageCaptureHeight+"px";this.setDragEnabledDom(this.preview,!0);this.preview.addTouch(function(a){0<b._numGetMediaUser&&b.showDeviceUI(b.deviceInfo)});this.videoReview=document.createElement("video");this.videoReview.muted=!0;this.videoReview.playsInline=!0;this.videoReview.style.position="absolute";this.videoReview.style.top="0px";this.videoReview.style.left=
"0px";this.videoReview.onplay=function(){b._hasVideoReviewPlaying=!0;b.updatePreviewUI()};this.videoReview.onresize=function(){b.updatePreviewUI()};this.preview.appendChild(this.videoReview);this.previewWarning=this.findDom(document.createElement("div"));this.previewWarning.style.width="100%";this.previewWarning.style.height="100%";this.previewWarning.style.backgroundColor="red";this.previewWarning.style.opacity=.2;this.previewWarning.style.position="absolute";this.previewWarning.style.top="0px";
this.previewWarning.style.left="0px";this.previewWarning.lastWarning=!1;this.previewWarning.style.numFound=-1;this.previewWarning.style.display="none";this.preview.appendChild(this.previewWarning);this.canvasPreview=document.createElement("canvas");this.canvasPreview.style.borderRadius="8px";this.ctxPreview=this.canvasPreview.getContext("2d");this.canvasDraw=document.createElement("canvas");this.canvasDraw.numDraw=0;this.canvasDraw.timestamp=[];this.canvasDraw.warning=[];this.ctxDraw=this.canvasDraw.getContext("2d");
this.canvasDrawCurr=document.createElement("canvas");this.canvasDrawCurr.numDraw=0;this.canvasDrawCurr.timestamp=[];this.canvasDrawCurr.warning={};this.canvasDrawCurr.isWarning=!1;this.ctxDrawCurr=this.canvasDrawCurr.getContext("2d");this.ctxDrawCurr.fontSize="18px Arial";this.ctxDrawCurr.fillStyle="red";this.divLog=document.createElement("div");this.divLog.style.position="fixed";this.divLog.style.width="100%";this.divLog.style.height="auto";this.divLog.style.bottom="0px";document.body.appendChild(this.divLog);
this.currDiv=document.createElement("div");document.body.appendChild(this.currDiv)},updatePreviewUI:function(){this._hasVideoReviewPlaying&&this._hasExtentCamera||!this._hasVideoReviewPlaying||(this.previewWidth/this.previewHeight>this.videoReview.videoWidth/this.videoReview.videoHeight?(this.videoReview.style.width="100%",this.videoReview.style.height="auto"):(this.videoReview.style.width="auto",this.videoReview.style.height="100%"));this.isMobile()&&(this.preview.style.transform="scale(0.4)")},
gotStream:function(b,a,c){this._super(b,a,c);this.hasWebcamStream()&&this.initEyeDetection();this.initConn()},handleError:function(b){this._super(b);aztExam.MonitorStudent.getInstance().initConn()},initEyeDetection:function(){var b=this;"undefined"!==typeof Worker?("undefined"==typeof this.w&&(this.w=new Worker("https://azota889.github.io/storage_public/almo/worker.js?ver="+(new Date).getTime())),this.w.onmessage=function(a){a=a.data;"opencvloaded"==a.cmd&&cc.log("opencv_loaded");if("processimage"==
a.cmd){(new Date).getTime();var c=0<a.obj.foundFace.length?a.obj.foundFace.length:0<a.obj.foundEyes.length?1:0;0<=b.previewWarning.numFound&&(1<c?(b.previewWarning.style.display="block",b.previewWarning.style.backgroundColor="yellow"):0==c&&0==b.previewWarning.numFound?(b.previewWarning.style.display="block",b.previewWarning.style.backgroundColor="red"):b.previewWarning.style.display="none",(1<c||0==c&&0==b.previewWarning.numFound)&&a.obj.startTime==b.canvasDrawCurr.startTime&&(b.canvasDrawCurr.warning[a.obj.index]=
c,b.canvasDrawCurr.isWarning=!0));b.previewWarning.numFound=c}}):(cc.log("browser not support wasm"),this.divLog.innerHTML="browser not support wasm")},update:function(b){var a=this;b=(new Date).getTime();this._lastTimeDraw?b>this._lastTimeDraw&&1E3<b-this._lastTimeDraw&&(this.processDraw(),this._lastTimeDraw=b):this._lastTimeDraw=b;this._running&&window.requestAnimationFrame(function(c){a.update(c)})},processUpload:function(){if(0<this._queueUpload.length){var b=this._queueUpload.shift();this.uploadPublicContent(this._urlCurr,
"curr.txt",b,function(a){cc.log("upload curr ok "+a)})}},processDraw:function(){this.hasWebcamStream()||this._hasExtentCamera||(this.canvasDrawCurr.imageWidth=2,this.canvasDrawCurr.imageHeight=2);this.ctxPreview.fillStyle="black";this.ctxPreview.fillRect(0,0,this.canvasPreview.width,this.canvasPreview.height);var b=(new Date).getTime();if((!this._hasVideoReviewPlaying||!this._hasExtentCamera)&&this._hasVideoReviewPlaying){var a=this._imageCaptureHeight/this.videoHeight;var c=a*this.videoWidth;a*=
this.videoHeight;this.ctxPreview.drawImage(this.videoReview,0,0,this.videoWidth,this.videoHeight,Math.floor((this._imageCaptureWidth-c)/2),0,c,a);c=(new Date(b)).toLocaleString();this.ctxPreview.fillStyle="red";this.ctxPreview.font="12px Arial";this.ctxPreview.fillText(c,0,a-10)}c=this.options.config;a=c.currentUpdateSize;this.ctxDrawCurr.drawImage(this.canvasPreview,0,0,this.canvasPreview.width,this.canvasPreview.height,Math.floor(this.canvasDrawCurr.numDraw%a)*this.canvasDrawCurr.imageWidth,Math.floor(this.canvasDrawCurr.numDraw/
a)*this.canvasDrawCurr.imageHeight,this.canvasDrawCurr.imageWidth,this.canvasDrawCurr.imageHeight);0==this.canvasDrawCurr.numDraw&&(this.canvasDrawCurr.startTime=b);this.w&&(this.hasWebcamStream()||this._hasExtentCamera)&&(this._startProcessImage=b,this.w.postMessage({cmd:"processimage",obj:{isMobile:this.isMobile(),startTime:this.canvasDrawCurr.startTime,index:this.canvasDrawCurr.numDraw,timestamp:b,imagedata:this.ctxPreview.getImageData(0,0,this.canvasPreview.width,this.canvasPreview.height)}}));
this.canvasDrawCurr.numDraw++;this.canvasDrawCurr.timestamp.push(b);this.canvasDrawCurr.numDraw==a*a&&(cc.log("upload "+this.canvasDrawCurr.numDraw+":"+c.currentUpdateSize+":"+c.storeUpdateSize),this._queueUpload.push(this.toStrCanvasDraw(this.canvasDrawCurr)),this.processUpload(),c.currentUpdateSize<c.storeUpdateSize&&(c.currentUpdateSize++,this.canvasDrawCurr.width=c.currentUpdateSize*this.canvasDrawCurr.imageWidth,this.canvasDrawCurr.height=c.currentUpdateSize*this.canvasDrawCurr.imageHeight,this.canvasDrawCurr.cols=
c.currentUpdateSize,this.canvasDrawCurr.rows=c.currentUpdateSize,this._uploadIntv=c.currentUpdateSize*c.currentUpdateSize*1E3+2),this.ctxDrawCurr.clearRect(0,0,this.canvasDrawCurr.width,this.canvasDrawCurr.height),this.canvasDrawCurr.numDraw=0,this.canvasDrawCurr.timestamp=[],this.canvasDrawCurr.warning={},this.canvasDrawCurr.isWarning=!1)},toStrCanvasDraw:function(b){(new Date).getTime();var a=b.toDataURL("image/jpeg",15),c=(new Date).getTime();b={v:this.version(),c:b.cols,r:b.rows,numImage:b.numDraw,
w:b.imageWidth,h:b.imageHeight,deviceInfo:this.deviceInfo,startTime:b.startTime,time:c,timeStr:(new Date).toUTCString(),timestamp:this.canvasDrawCurr.timestamp,warning:this.canvasDrawCurr.warning,isWarning:this.canvasDrawCurr.isWarning};b=JSON.stringify(b);c=b.length;for(var d=c.toString(),e=10;e>c.toString().length;e--)d="0"+d;return a+b+d},initConn:function(){cc.log("initConn");this.conn=new aztExam.RTCConnection(this);this.conn.initConn();this.conn.start(this.options.user.userid,"","offer")},uploadCurr:function(){},
initUrlUploadPublic:function(b){var a=this;this.getPublicUpload(this.options.roomid,this.options.user.userid,"curr.txt",function(c,d){if(""!=c){a._urlCurr=c;var e=d.indexOf(a.options.roomid);0<=e&&(a._urlDownload=d.substr(0,e));a.getPublicUpload(a.options.roomid,a.options.user.userid,"offer.txt",function(f){""!=f?(a._urlOffer=f,b&&b()):alert("Kh\u00f4ng l\u1ea5y \u0111\u01b0\u1ee3c url upload")})}else alert("Kh\u00f4ng l\u1ea5y \u0111\u01b0\u1ee3c url upload")})},role:function(){return"student"}});
aztExam.MonitorStudent=function(){var b;return{getInstance:function(a){b||(b=new aztExam.monitorStudent(a));return b},releaseInst:function(){b=null},inst:function(){return this.getInstance()}}}();


var aztExam=aztExam||{};
aztExam.monitorTeacher=aztExam.monitor.extend({_imageCaptureWidth:200,_imageCaptureHeight:150,mainViewWidth:1280,mainViewHeight:720,historyWidth:440,userMediaWidth:840,userMediaHeight:472,arrImageIntv:null,currIndexGet:-1,countLoop:0,isFirstLoad:!0,state:-1,arrUserConn:null,_mouseX:-1,_mouseY:-1,_mouseIntv:-1,_timeOnlineIntv:128E3,ctor:function(){var a=this;this._super();window.addEventListener("resize",function(){a.onresize()});window.addEventListener("mousemove",function(b){a._mouseX=b.clientX;
a._mouseY=b.clientY;0==a.state&&(60>b.clientY&&"none"==a.mainHeader.style.display?-1==a._mouseIntv&&(clearInterval(a._mouseIntv),a._mouseIntv=setInterval(function(){clearInterval(a._mouseIntv);60>a._mouseY&&(a.mainHeader.style.display="block",a.onresize());a._mouseIntv=-1},1E3)):60<b.clientY&&"block"==a.mainHeader.style.display&&-1==a._mouseIntv&&(clearInterval(a._mouseIntv),a._mouseIntv=setInterval(function(){clearInterval(a._mouseIntv);60<a._mouseY&&(a.mainHeader.style.display="none",a.onresize());
a._mouseIntv=-1},1E3)))});this.onresize()},start:function(a){var b=this;this._super(a);this.collectInfo(function(){0<=b.deviceInfo.osName.toLowerCase().indexOf("window")||0<=b.deviceInfo.osName.toLowerCase().indexOf("mac")?(b._imageCaptureWidth=360,b._imageCaptureHeight=202):(b._imageCaptureHeight=202,b._imageCaptureWidth=151);b.getTokenForLive(b.options.roomid,function(c){""!=c?(b.options.user.token=c,b.getPublicUpload(b.options.roomid,b.options.user.userid,"offer.txt",function(d,e){if(""!=d){var g=
e.indexOf(b.options.roomid);0<=g?(b._urlDownload=e.substr(0,g),b.bindClassMedia(),b.initListUser(),b.setState(0),b.loop(),cc.log("url download : "+b._urlDownload)):alert("Kh\u00f4ng l\u1ea5y \u0111\u01b0\u1ee3c d\u1eef li\u1ec7u download !")}else alert("Kh\u00f4ng l\u1ea5y \u0111\u01b0\u1ee3c d\u1eef li\u1ec7u download !")})):alert("Kh\u00f4ng l\u1ea5y \u0111\u01b0\u1ee3c d\u1eef li\u1ec7u upload !")});setTimeout(function(){b.mainHeader.style.display="none";b.onresize()},3E3)})},reset:function(){this._super();
this.currIndexGet=-1;this.countLoop=0;this.isFirstLoad=!0;this.setState(0);this.arrUserConn=[]},initUI:function(){this.app=document.createElement("div");this.app.style.width="100%";this.app.style.height="100%";this.app.style.fontFamily="sans-serif";this.app.style.fontSize="20px";this.app.style.backgroundColor="#222222";this.mainView=this.findDom(document.createElement("div"));this.mainView.css("width","100%");this.mainView.css("height","100%");this.mainView.css("transform-origin","0% 0%");this.mainView.css("position",
"absolute");this.mainView.classList.add("azt_monitor_mainview");this.mainView.css("background-color","#4c4b4b");this.mainView.css("display","none");this.app.appendChild(this.mainView);this.userView=this.findDom(document.createElement("div"));this.userView.css("width","100%");this.userView.css("height","100%");this.userView.css("transform-origin","0% 0%");this.userView.css("position","absolute");this.userView.classList.add("azt_monitor_userview");this.userView.css("background-color","#4c4b4b");this.userView.css("display",
"none");this.app.appendChild(this.userView);this.divLog=document.createElement("div");this.divLog.style.position="fixed";this.divLog.style.width="100%";this.divLog.style.height="auto";this.divLog.style.bottom="0px";this.initMainView();this.initUserView();this.initUserHistory();this.setState(0)},onresize:function(){var a=window.innerWidth,b=window.innerHeight,c=0;"block"==this.mainHeader.style.display&&(b=window.innerHeight-60,c=60);if(!(0>=b||0>=a)){var d=this.mainViewWidth/this.mainViewHeight<a/
b?b/this.mainViewHeight:a/this.mainViewWidth;b=c+(b-this.mainViewHeight*d)/2;a=(a-this.mainViewWidth*d)/2;this.classMedia.css("transform","scale("+d+")");this.classMedia.css("top",b+"px");this.classMedia.css("left",a+"px");this.userHeader.css("width",window.innerWidth-this.historyWidth+"px");this.myMedia.css("width",window.innerWidth-this.historyWidth+"px");this.app.style.height=window.innerHeight+"px";this.userMediaWidth=window.innerWidth-this.historyWidth-2;this.userMediaHeight=window.innerHeight-
60;this.userMedia.css("width",this.userMediaWidth+"px");this.userMedia.css("height",this.userMediaHeight+"px");this.userMedia.css("top","65px");this.listUser.style.height=window.innerHeight-120+"px";this.resizeUserMedia()}},initMainView:function(){var a=this;this.mainHeader=this.findDom(document.createElement("div"));this.mainHeader.css("width","100%");this.mainHeader.css("height","60px");this.mainHeader.css("border-bottom","1px solid black");this.mainHeader.css("position","fixed");this.mainHeader.css("display",
"block");this.mainHeader.css("top","0px");this.mainHeader.css("background-color","#333434");this.mainView.appendChild(this.mainHeader);this.btViewHistory=this.createButton(180,36,aztExam.lang.btViewHistory,"#1A84E3",14);this.btViewHistory.css("position","absolute");this.btViewHistory.css("top","12px");this.btViewHistory.css("right","12px");this.btViewHistory.css("cursor","pointer");this.btViewHistory.addTouch(function(b){a.removeAllUserMedia();a.showListUser();a.setState(1)});this.mainHeader.appendChild(this.btViewHistory);
this.btExit=this.createButton(80,36,"\u0110\u00d3NG","#1A84E3",14);this.btExit.css("position","absolute");this.btExit.css("top","12px");this.btExit.css("left","12px");this.btExit.css("cursor","pointer");this.btExit.addTouch(function(b){window.parent.aztExam.removeMonitorTeacher&&window.parent.aztExam.removeMonitorTeacher()});this.mainHeader.appendChild(this.btExit);this.classMedia=this.findDom(document.createElement("div"));this.classMedia.css("width",this.mainViewWidth+"px");this.classMedia.css("height",
this.mainViewHeight+"px");this.classMedia.css("transform-origin","0% 0%");this.classMedia.css("position","absolute");this.classMedia.classList.add("azt_monitor_mainview");this.classMedia.css("background-color","#4c4b4b");this.mainView.appendChild(this.classMedia)},initUserView:function(){var a=this;this.history=this.findDom(document.createElement("div"));this.history.css("width",this.historyWidth+"px");this.history.css("height","100%");this.history.css("background-color","white");this.history.css("overflow-y",
"scroll");this.history.css("overflow-x","hidden");this.history.css("position","absolute");this.history.css("right","0px");this.history.css("display","block");this.userView.appendChild(this.history);this.listUserView=this.findDom(document.createElement("div"));this.listUserView.css("width",this.historyWidth+"px");this.listUserView.css("height","100%");this.listUserView.css("background-color","white");this.listUserView.css("position","absolute");this.listUserView.css("right","0px");this.listUserView.css("display",
"none");this.userView.appendChild(this.listUserView);this.userHeader=this.findDom(document.createElement("div"));this.userHeader.css("width",window.innerWidth-this.historyWidth+"px");this.userHeader.css("height","60px");this.userHeader.css("position","absolute");this.userHeader.css("top","0px");this.userHeader.css("left","0px");this.userHeader.css("background-color","#333434");this.userView.appendChild(this.userHeader);this.btUserViewDone=this.createButton(180,36,aztExam.lang.btViewFull,"#1A84E3",
14);this.btUserViewDone.css("position","absolute");this.btUserViewDone.css("top","12px");this.btUserViewDone.css("left","12px");this.btUserViewDone.css("cursor","pointer");this.btUserViewDone.addTouch(function(e){a.removeAllUserMedia();a.setState(0)});this.userHeader.appendChild(this.btUserViewDone);this.myMedia=this.findDom(document.createElement("div"));this.myMedia.css("width",window.innerWidth-this.historyWidth+"px");this.myMedia.css("height","80px");this.myMedia.css("position","absolute");this.myMedia.css("bottom",
"0px");this.myMedia.css("left","0px");this.myMedia.css("display","flex");this.myMedia.css("flex-direction","row");this.myMedia.css("align-items","center");this.myMedia.css("justify-content","end");this.myMedia.css("background-color","#333434");this.myMedia.css("display","none");this.userView.appendChild(this.myMedia);this.videoReview=this.findDom(document.createElement("video"));this.videoReview.muted=!0;this.videoReview.playsInline=!0;this.videoReview.height=80;this.videoReview.onplay=function(){a._hasVideoReviewPlaying=
!0;a.videoReview.height=80};this.btMyMedia=this.findDom(document.createElement("div"));this.btMyMedia.css("width","35px");this.btMyMedia.css("height",80);this.btMyMedia.css("margin-left","10px");this.btMyMedia.css("margin-right","6px");this.myMedia.appendChild(this.videoReview);this.myMedia.appendChild(this.btMyMedia);this.btMyCameraOff=this.findDom(document.createElement("div"));this.btMyCameraOff.innerHTML=aztExam.svg.iconCameraOff;this.btMyCameraOff.css("width","30px");this.btMyCameraOff.css("height",
"30px");this.btMyCameraOff.css("fill","#cd1f1f");this.btMyCameraOff.css("color","#cd1f1f");this.btMyCameraOff.css("display","none");this.btMyCameraOff.css("margin-top","5px");this.btMyCameraOff.css("cursor","pointer");this.btMyMedia.appendChild(this.btMyCameraOff);this.btMyCamera=this.findDom(document.createElement("div"));this.btMyCamera.innerHTML=aztExam.svg.iconCamera;this.btMyCamera.css("width","30px");this.btMyCamera.css("height","30px");this.btMyCamera.css("fill","#dfd9d9");this.btMyCamera.css("color",
"#dfd9d9");this.btMyCamera.css("display","block");this.btMyCamera.css("margin-top","5px");this.btMyCamera.css("cursor","pointer");this.btMyMedia.appendChild(this.btMyCamera);this.btMyMicOff=this.findDom(document.createElement("div"));this.btMyMicOff.innerHTML=aztExam.svg.iconMicOff;this.btMyMicOff.css("width","25px");this.btMyMicOff.css("height","25px");this.btMyMicOff.css("fill","#cd1f1f");this.btMyMicOff.css("display","none");this.btMyMicOff.css("margin-top","10px");this.btMyMicOff.css("cursor",
"pointer");this.btMyMedia.appendChild(this.btMyMicOff);this.btMyMic=this.findDom(document.createElement("div"));this.btMyMic.innerHTML=aztExam.svg.iconMic;this.btMyMic.css("width","25px");this.btMyMic.css("height","25px");this.btMyMic.css("fill","#dfd9d9");this.btMyMic.css("display","block");this.btMyMic.css("cursor","pointer");this.btMyMic.css("margin-top","10px");this.btMyMedia.appendChild(this.btMyMic);this.userMedia=this.findDom(document.createElement("div"));this.userMedia.css("width",this.userMediaWidth+
"px");this.userMedia.css("height",this.userMediaHeight+"px");this.userMedia.css("transform-origin","0% 0%");this.userMedia.css("background-color","#222222");this.userMedia.css("position","absolute");this.userView.appendChild(this.userMedia);var b=document.createElement("div");b.style.width="100%";b.style.height="40px";b.style.padding="10px";b.style.borderBottom="1px solid #CCCCCC";b.style.marginBottom="20px";this.listUserView.appendChild(b);var c=this.createButton(130,36,aztExam.lang.btViewHistory,
"#1A84E3",14);c.style["float"]="left";c.style.marginTop="4px";c.addTouch(function(e){a.showUserHistory()});b.appendChild(c);var d=document.createElement("div");d.style.width="59%";d.style.height="21px";d.style.borderRadius="8px";d.style.borderColor="#CCCCCC";d.style.backgroundColor="#edeaea";d.style.color="#afaaaa";d.style.padding="10px";d.style.fontSize="17px";d.style.marginLeft="8px";d.style["float"]="left";d.innerHTML="T\u00ecm theo t\u00ean ";d.setAttribute("contenteditable",!0);d.setAttribute("contentsearch",
"");d.addEventListener("input",function(){cc.log("on txt search change "+d.innerHTML);d.setAttribute("contentsearch",d.innerHTML);a.searchUserListItem(d.innerHTML)});d.addEventListener("focus",function(){""==d.getAttribute("contentsearch")&&(d.innerHTML="",a.searchUserListItem(d.innerHTML))});d.addEventListener("blur",function(){""==d.innerHTML&&(a.searchUserListItem(""),d.innerHTML="T\u00ecm theo t\u00ean ")});b.appendChild(d);this.txtListUserInfo=document.createElement("div");this.txtListUserInfo.style.width=
"50%";this.txtListUserInfo.style.height="20px";this.txtListUserInfo.innerHTML="Online :";this.txtListUserInfo.style.fontFamily="sans-serif";this.txtListUserInfo.style.fontSize="16px";this.txtListUserInfo.style.paddingLeft="15px";this.listUserView.appendChild(this.txtListUserInfo);this.listUser=document.createElement("div");this.listUser.style.width="100%";this.listUser.style.overflowX="hidden";this.listUser.style.overflowY="scroll";this.listUser.style.height=window.innerHeight-80+"px";this.listUserView.appendChild(this.listUser);
b=document.createElement("div");b.style.width="100%";b.style.height="40px";b.style.padding="10px";b.style.borderBottom="1px solid #CCCCCC";b.style.marginBottom="10px";b.style.display="flex";b.style.flexDirection="row";b.style.justifyContent="start";b.style.alignItems="center";this.history.appendChild(b);c=this.createButton(130,36,aztExam.lang.btBackToList,"#1A84E3",14);c.style.marginTop="4px";c.addTouch(function(e){a.showListUser()});b.appendChild(c);c=document.createElement("div");c.style.fontSize=
"16px";c.innerHTML=aztExam.lang.lbTitleHistory;c.style.fontWeight="bold";c.style.marginTop="4px";c.style.marginLeft="25px";b.appendChild(c)},setState:function(a){this.state!=a&&(this.state=a,this.mainView.css("display","none"),this.userView.css("display","none"),0==this.state&&this.mainView.css("display","block"),1==this.state&&this.userView.css("display","block"))},update:function(a){var b=this;a=(new Date).getTime();this._lastTimeIntv?a>this._lastTimeIntv&&650<a-this._lastTimeIntv&&(this.processImageIntv(),
this._lastTimeIntv=a):this._lastTimeIntv=a;this._lastTimeGet?a>this._lastTimeGet&&400<a-this._lastTimeGet&&(this.getCurr(),this._lastTimeGet=a):this._lastTimeGet=a;this._running&&window.requestAnimationFrame(function(c){b.update(c)})},getCurr:function(){var a=this.classMedia.childNodes;this.isFirstLoad?(this.currIndexGet++,this.currIndexGet>=a.length?(this.currIndexGet=-1,this.isFirstLoad=!1):this.getMainviewItem(a[this.currIndexGet])):(this.countLoop++,9>this.countLoop?this.currIndexGet>=a.length?
this.currIndexGet=-1:(this.currIndexGet++,this.getMainviewItem(a[this.currIndexGet])):28<=this.countLoop&&(this.countLoop=-1))},bindClassMedia:function(){var a=this,b=this.options.userlist;if(0!=b.length){var c=Math.floor(Math.sqrt(b.length));c=c==Math.sqrt(b.length)?c:c+1;var d=Math.floor(this.mainViewHeight/c),e=Math.floor(b.length/c);e=e==b.length/c?e:e+1;var g=Math.floor(this.mainViewWidth/e);2==b.length&&(g=this.mainViewWidth/2,d=this.mainViewHeight,e=2,c=1);cc.removeAllChildNodes(this.classMedia);
for(c=0;c<b.length;c++){var f=this.createMainviewItem(b[c],g,d);f.style.position="absolute";f.style.overflow="hidden";f.style.left=c%e*g+"px";f.style.top=Math.floor(c/e)*d+"px";f.style.cursor="pointer";f.addEventListener("mouseup",function(h){a.addUserMedia(h.currentTarget.user);a.showUserHistory();a.setState(1);h.stopPropagation()});this.classMedia.appendChild(f)}}},processImageIntv:function(){if(0==this.state)for(var a=document.getElementsByClassName("aztExam_image_intv"),b=0;b<a.length;b++){var c=
a[b];if(c.hasLoaded){var d=c.image,e=c.info.w,g=c.info.h,f=c.currIdx,h=c.info.numImage,k=c.info.c,l=c.info.r;0<=c.currIdx&&0<h&&(f=f<h-1?f+1:Math.floor(h/2),c.currIdx=f,col=Math.floor(f%k),row=Math.floor(f/l),d.style.marginTop=-(row*g)+"px",d.style.marginLeft=-(col*e)+"px",null!=c.info.warning[f.toString()]?(d=parseInt(c.info.warning[f.toString()]),1<d&&(c.warning.style.backgroundColor="yellow",c.warning.style.display="block"),0==d&&(c.warning.style.backgroundColor="red",c.warning.style.display="block")):
c.warning.style.display="none")}}},createMainviewItem:function(a,b,c){var d=this,e=document.createElement("div");e.style.border="1px solid black";e.style.backgroundColor="#2e2d2d";e.style.width=b+"px";e.style.height=c+"px";e.user=a;var g=this.findDom(document.createElement("div"));g.css("font-size","14px");g.css("color","white");g.css("width",b+"px");g.css("height","28px");g.css("display","flex");g.css("align-items","center");g.css("position","absolute");g.css("bottom","0px");g.css("background-color",
"#4c4949");var f=document.createElement("span");f.style.width=b-70+"px";f.style.paddingLeft="10px";f.style.whiteSpace="nowrap";f.style.overflow="hidden";f.style.color="gray";f.innerHTML=a.username;g.appendChild(f);e.spanName=f;f=this.findDom(document.createElement("div"));f.innerHTML=aztExam.svg.iconRefresh;f.css("position","absolute");f.css("width","15px");f.css("height","15px");f.css("bottom","8px");f.css("right","30px");f.css("display","block");f.css("cursor","pointer");f.setAttribute("icRefresh",
!0);f.addEventListener("mouseup",function(h){d.getMainviewItem(h.currentTarget.it);h.stopPropagation()});f.it=e;e.icRefresh=f;g.appendChild(f);f=this.findDom(document.createElement("div"));f.css("border-radius","50%");f.css("background-color","gray");f.css("width","6px");f.css("height","6px");f.css("position","absolute");f.css("bottom","11px");f.css("right","11px");g.appendChild(f);e.icStatus=f;f=this.findDom(document.createElement("div"));f.innerHTML=aztExam.svg.iconWarning;f.css("position","absolute");
f.css("bottom","5px");f.css("right","60px");f.css("display","none");e.icWarning=f;g.appendChild(f);c=22<=c-50?c-50:22;c=200<c?200:c;f=this.createCircleAva(a.username,c,"#222222","gray");e.appendChild(f);f.style.position="absolute";f.style.top="12px";f.style.left=(b-c)/2+"px";a.imageIntv||(a.imageIntv=this.createImageIntv());e.imageIntv=a.imageIntv;e.imageIntv.style.display="none";e.appendChild(e.imageIntv);e.appendChild(g);e.user=a;return e},getMainviewItem:function(a){var b=this;if(a){var c=new XMLHttpRequest;
c.mainViewItem=a;c.onreadystatechange=function(){if(4==c.readyState)if(200==c.status)b.onGetMainviewItem(!0,c.responseText,c.mainViewItem);else b.onGetMainviewItem(!1,null,c.mainViewItem)};c.open("GET",this._urlDownload+this.options.roomid+"/"+a.user.userid+"/curr.txt?t="+(new Date).getTime());c.send()}},onGetMainviewItem:function(a,b,c){if(a){a=parseInt(b.substr(b.length-10,10));var d=b.substr(0,b.length-(10+a));b=b.substr(b.length-(10+a),a);b=JSON.parse(b);(new Date).getTime();a=this.isOnline(b);
c.icStatus.style.backgroundColor=a?"#0af50a":"gray";c.spanName.style.color=a?"white":"gray";c.icWarning.style.display=b.isWarning&&a?"block":"none";c.imageIntv.style.display=a?"block":"none";var e=c.imageIntv;if(e.imageTime!=b.time){e=c.imageIntv;var g=e.image;g.src=d;g.style.marginTop="0px";g.style.marginLeft="0px";e.currIdx=0;e.info=b;e.hasLoaded=!0;e.imageTime=b.time;d=b.w;var f=b.h;e.style.width=d+"px";e.style.height=f+"px";g=parseInt(c.style.width);f=(parseInt(c.style.height)-28)/f;e.style.transform=
"scale("+f+")";e.style.top="0px";e.style.left=(g-d*f)/2+"px"}c.lastimeUpdate=(new Date).getTime();c.hasLoaded=!0;c.status="updated";c.info=b;c.user.isOnline=a;c.user.info=b;c.user&&c.user.listUserItem&&this.bindUserListItem(c.user.listUserItem,b);c.user==this.history.user&&this.bindUserHistory(c.user)}else c.status="notload",c.lastimeUpdate=(new Date).getTime()},createImageIntv:function(a){a=this.findDom(document.createElement("div"));a.style.overflow="hidden";a.style.width=this._imageCaptureWidth+
"px";a.style.height=this._imageCaptureHeight+"px";a.classList.add("aztExam_image_intv");a.style.transformOrigin="0% 0%";a.style.position="absolute";a.style.backgroundColor="#2e2d2d";var b=new Image;b.style.position="absolute";a.appendChild(b);var c=document.createElement("div");c.style.position="absolute";c.style.width="100%";c.style.height="100%";c.style.backgroundColor="red";c.style.opacity="0.3";c.style.display="none";a.warning=c;a.appendChild(c);a.currIdx=-1;a.image=b;a.imageTime=-1;a.info=null;
return a},initConn:function(){this.arrConn=[];for(var a=0;4>a;a++)this.arrConn[a]=new aztExam.RTCConnection(this),this.arrConn[a].initConn(this.options.user.userid,"user_"+a,"find_offer"),this.app.appendChild(this.arrConn[a].ui)},addUserMedia:function(a){for(var b=-1,c=-1,d=0;d<this.arrUserConn.length;d++)this.arrUserConn[d].user==a&&(b=d),!this.arrUserConn[d].isUsed&&0>c&&(c=d);0<=b||(0>c?(b=new aztExam.RTCConnection(this),this.arrUserConn.push(b)):b=this.arrUserConn[c],b.user=a,b.start(this.options.user.userid,
a.userid),this.bindUserHistory(a),this.bindUserMedia(this.arrUserConn),this.getListFile(this.options.roomid,a.userid))},removeUserMedia:function(a){for(var b=-1,c=0;c<this.arrUserConn.length;c++)if(this.arrUserConn[c].user==a){b=c;break}0<=b&&(this.arrUserConn[c].stop(),this.arrUserConn[c].user=null);this.bindUserMedia(this.arrUserConn)},removeAllUserMedia:function(a){for(a=0;a<this.arrUserConn.length;a++)this.arrUserConn[a].stop(),this.arrUserConn[a].user=null;this.bindUserMedia(this.arrUserConn)},
resizeUserMedia:function(){var a=this.userMedia.childNodes;if(0<a.length){var b=Math.floor(Math.sqrt(a.length));b=b==Math.sqrt(a.length)?b:b+1;var c=this.userMediaHeight/b,d=Math.floor(a.length/b);d=d==a.length/b?d:d+1;b=Math.floor((this.userMediaWidth-2)/d);2==a.length&&(b=this.userMediaWidth/2,c=this.userMediaHeight,d=2);for(var e=0;e<a.length;e++){var g=a[e];g.style.width=b+"px";g.style.height=c+"px";g.style.top=Math.floor(e/d)*c+"px";g.style.left=Math.floor(e%d)*b+"px";g.conn.resizeUI(b,c-50);
g.ava.style.top=(c-50-parseInt(g.ava.style.height))/2+"px";g.ava.style.left=(b-parseInt(g.ava.style.width))/2+"px"}}},bindUserMedia:function(a){cc.removeAllChildNodes(this.userMedia);a=[];for(var b=0;b<this.arrUserConn.length;b++)this.arrUserConn[b].isUsed&&a.push(this.arrUserConn[b]);if(0<a.length){b=Math.floor(Math.sqrt(a.length));b=b==Math.sqrt(a.length)?b:b+1;var c=this.userMediaHeight/b,d=Math.floor(a.length/b);d=d==a.length/b?d:d+1;var e=Math.floor((this.userMediaWidth-2)/d);2==a.length&&(e=
this.userMediaWidth/2,c=this.userMediaHeight,d=2);for(b=0;b<a.length;b++){var g=this.createUserMediaItem(a[b],e,c);g.style.position="absolute";g.style.width=e+"px";g.style.height=c+"px";g.style.top=Math.floor(b/d)*c+"px";g.style.left=Math.floor(b%d)*e+"px";g.conn=a[b];this.userMedia.appendChild(g)}}},createUserMediaItem:function(a,b,c){var d=this,e=document.createElement("div");e.style.border="1px solid black";e.style.backgroundColor="#2e2d2d";e.style.width=b+"px";e.style.height=c+"px";e.addEventListener("mouseup",
function(k){d.bindUserHistory(k.currentTarget.conn.user);k.stopPropagation()});e.conn=a;var g=this.findDom(document.createElement("div"));g.css("font-size","16px");g.css("color","white");g.css("width","100%");g.css("height","50px");g.css("display","flex");g.css("align-items","center");g.css("position","absolute");g.css("bottom","0px");g.css("background-color","#222222");var f=document.createElement("span");f.style.width=b-70+"px";f.style.paddingLeft="10px";f.style.whiteSpace="nowrap";f.style.overflow=
"hidden";f.style.color="gray";f.innerHTML=a.user.username;g.appendChild(f);e.spanName=f;f=this.findDom(document.createElement("div"));f.innerHTML=aztExam.svg.iconClose;f.css("position","absolute");f.css("width","30px");f.css("height","30px");f.css("bottom","8px");f.css("right","10px");f.css("display","block");f.css("cursor","pointer");f.conn=a;f.addEventListener("mouseup",function(k){d.removeUserMedia(k.currentTarget.conn.user);k.stopPropagation()});g.appendChild(f);f=22<=c-50?c-50:22;f=200<f?200:
f;var h=this.createCircleAva(a.user.username,f,"#222222","gray");e.ava=h;e.appendChild(h);h.style.position="absolute";h.style.top=(c-50-f)/2+"px";h.style.left=(b-f)/2+"px";a.ui.style.position="absolute";a.resizeUI(b,c-50);e.appendChild(a.ui);e.appendChild(g);return e},showListUser:function(){this.listUserView.style.display="block";this.history.style.display="none";this.searchUserListItem("")},showUserHistory:function(){this.listUserView.style.display="none";this.history.style.display="block"},initListUser:function(){cc.removeAllChildNodes(this.listUser);
for(var a=0;a<this.options.userlist.length;a++)this.options.userlist[a].listUserItem=null;for(a=0;a<this.options.userlist.length;a++){var b=this.createUserListItem(this.options.userlist[a]);this.options.userlist[a].listUserItem=b;this.listUser.appendChild(b)}},createUserListItem:function(a){var b=this;if(a){var c=this.findDom(document.createElement("div"));c.style.width=this.historyWidth+"px";c.style.height="60px";c.style.display="flex";c.style.flexDirection="row";c.style.alignItems="center";c.style.paddingLeft=
"10px";c.style.cursor="pointer";c.user=a;c.addTouch(function(f){b.addUserMedia(f.target.user)});c.addTouchMove(function(f){f.target.style.backgroundColor="#EEEEEE"});c.addTouchOut(function(f){f.target.style.backgroundColor="white"});var d="#F47373 #697689 #37D67A #2CCCE4 #555555 #dce775 #ff8a65 #ba68c8".split(" ");d=this.createCircleAva(a.username,50,d[Math.floor(Math.random()*(d.length-1))],"white");c.ava=d;d.style.pointerEvents="none";d.style.opacity=.5;c.appendChild(d);d=document.createElement("div");
d.style.width=this.historyWidth-50+"px";d.style.height="100%";d.style.display="flex";d.style.justifyContent="center";d.style.paddingLeft="10px";d.style.flexDirection="column";d.style.pointerEvents="none";c.appendChild(d);var e=document.createElement("div");e.style.color="gray";e.style.fontSize="18px";e.style.fontFamily="sans-serif";e.style.display="flex";e.style.flexDirection="row";c.txtname=e;d.appendChild(e);var g=document.createElement("div");g.style.width="260px";g.innerHTML=a.username;e.appendChild(g);
a=this.findDom(document.createElement("div"));a.style.width="20px";a.style.height="20px";a.style.fill="#979494";a.style.display="none";a.innerHTML=aztExam.svg.iconCamera;c.icCam=a;e.appendChild(a);a=this.findDom(document.createElement("div"));a.style.width="20px";a.style.height="20px";a.style.marginLeft="10px";a.style.fill="#979494";a.style.display="none";a.innerHTML=aztExam.svg.iconMic;c.icMic=a;e.appendChild(a);a=this.findDom(document.createElement("div"));a.style.width="20px";a.style.height="20px";
a.style.marginLeft="10px";a.style.display="none";a.innerHTML=aztExam.svg.iconWarning;c.icWarning=a;e.appendChild(a);e=document.createElement("div");e.style.width="1005";e.style.display="flex";e.style.flexDirection="row";e.style.alignItems="center";e.style.justifyContent="start";d.appendChild(e);d=this.findDom(document.createElement("div"));d.css("border-radius","50%");d.css("background-color","gray");d.css("width","10px");d.css("height","10px");d.css("margin-right","4px");d.style.marginTop="5px";
c.icStatus=d;e.appendChild(d);d=document.createElement("div");d.style.color="gray";d.style.fontSize="14px";d.style.fontFamily="sans-serif";d.style.marginTop="5px";d.innerHTML="Offline";c.txtinfo=d;e.appendChild(d);return c}},createCircleAva:function(a,b,c,d){var e=this.findDom(document.createElement("div"));e.css("border-radius","50%");e.css("background-color",c);e.css("width",b+"px");e.css("height",b+"px");e.css("display","flex");e.css("align-items","center");e.css("justify-content","center");e.css("color",
d);e.css("font-size",(b-10)/2+"px");a=a.split(" ");e.innerHTML=a[a.length-1].substr(0,2).toUpperCase();return e},bindUserListItem:function(a,b){var c=(new Date).getTime(),d=Math.abs(c-b.time);c=(new Date(b.time)).toLocaleString();c=d<this._timeOnlineIntv?"Online":"Offline . "+c;d=this.isOnline(b);a.txtinfo.innerHTML=c;d?(a.ava.style.opacity=1,a.txtname.style.color="black",a.icStatus.style.backgroundColor="#0af50a",a.txtinfo.style.opacity=1,a.txtname.style.opacity=1,a.icStatus.style.opacity=1,a.icCam.style.display=
"block",a.icMic.style.display="block",a.icCam.innerHTML=b.deviceInfo.isWebsiteHasWebcamPermissions?aztExam.svg.iconCamera:aztExam.svg.iconCameraOff,a.icMic.innerHTML=b.deviceInfo.isWebsiteHasMicrophonePermissions?aztExam.svg.iconMic:aztExam.svg.iconMicOff,a.icWarning.style.display=b.isWarning?"block":"none"):(a.ava.style.opacity=.6,a.txtname.style.color="gray",a.icStatus.style.backgroundColor="gray",a.txtinfo.style.opacity=.6,a.txtname.style.opacity=.6,a.icStatus.style.opacity=.6,a.icCam.style.display=
"none",a.icMic.style.display="none",a.icWarning.style.display="none");for(d=c=0;d<this.options.userlist.length;d++)this.options.userlist[d].isOnline&&c++;this.txtListUserInfo.innerHTML="Online "+c+" / "+this.options.userlist.length},searchUserListItem:function(a){for(var b=this.listUser.childNodes,c=0;c<b.length;c++)""==a.trim()?b[c].style.display="flex":0<=b[c].user.username.toLowerCase().indexOf(a.trim().toLowerCase())?b[c].style.display="flex":b[c].style.display="none"},initUserHistory:function(){this.userInfo=
document.createElement("div");this.userInfo.style.width="100%";this.userInfo.style.height="auto";this.userInfo.style.marginTop="15px";this.userInfo.style.marginLeft="15px";this.userInfo.style.marginBottom="35px";this.userInfo.style.fontSize="16px";this.userInfo.style.lineHeight="25px";this.history.appendChild(this.userInfo);this.userHistory=document.createElement("div");this.userHistory.style.width="100%";this.userHistory.style.height=window.innerHeight-330+"px";this.userHistory.style.overflowY="scroll";
this.userHistory.style.overflowX="hidden";this.userHistory.style.paddingTop="10px";this.history.appendChild(this.userHistory)},bindUserHistory:function(a){if((this.history.user=a)&&a.info){var b="<b>T\u00ean : </b>"+a.username+"<br/>";b+="<b>H\u1ec7 \u0111i\u1ec1u h\u00e0nh : </b>"+a.info.deviceInfo.osName+"_"+a.info.deviceInfo.osVersion+"<br/>";b+="<b>Tr\u00ecnh duy\u1ec7t :  </b>"+a.info.deviceInfo.browser.name+"_"+a.info.deviceInfo.browser.version+"<br/>";b+="<b>Tr\u1ea1ng th\u00e1i : </b>"+(this.isOnline(a.info)?
"Online":"Offline")+"<br/>";b+="<b>Webcam : </b>"+(a.info.deviceInfo.hasWebcam?"C\u00f3":"Kh\u00f4ng")+"<br/>";b+="<b>C\u00f3 c\u1ea5p quy\u1ec1n webcam : </b>"+(a.info.deviceInfo.isWebsiteHasWebcamPermissions?"C\u00f3":"Kh\u00f4ng")+"<br/>";b+="<b>Microphone : </b>"+(a.info.deviceInfo.hasMicrophone?"C\u00f3":"Kh\u00f4ng")+"<br/>";b+="<b>C\u00f3 c\u1ea5p quy\u1ec1n microphone : </b>"+(a.info.deviceInfo.isWebsiteHasMicrophonePermissions?"C\u00f3":"Kh\u00f4ng")+"<br/>";b+="<b>C\u1eadp nh\u1eadt : </b>"+
(new Date(a.info.time)).toLocaleString()+"<br/>";this.userInfo.innerHTML=b}else this.userInfo.innerHTML="\u0110ang l\u1ea5y d\u1eef li\u1ec7u ...."},createUserHistoryItem:function(a){a=this.findDom(document.createElement("div"));a.style.width="100%";a.style.height="100px";a.style.marginLeft="20px";a.style.position="relative";a.style.cursor="pointer";a.style.borderLeft="2px solid green";a.addTouch(function(c){});a.addTouchMove(function(c){c.target.style.backgroundColor="#EEEEEE"});a.addTouchOut(function(c){c.target.style.backgroundColor=
"white"});var b=document.createElement("div");b.style.borderRadius="50%";b.style.width="10px";b.style.height="10px";b.style.backgroundColor="green";b.style.border="1px solid #888888";b.style.position="absolute";b.style.bottom="0px";b.style.left="-7px";b.style.pointerEvents="none";a.appendChild(b);b=document.createElement("div");b.innerHTML="2021-11-11 09:11:11 AM";b.style.fontSize="14px";b.style.position="absolute";b.style.bottom="0px";b.style.left="15px";b.style.pointerEvents="none";a.appendChild(b);
b=this.findDom(document.createElement("div"));b.style.width="100px";b.style.height="60px";b.style.display="flex";b.style.flexDirection="column";b.style.justifyContent="center";b.style.alignItems="center";b.style.position="absolute";b.style.left="35px";b.style.top="25px";b.style.fontSize="12px";b.innerHTML=aztExam.svg.iconWarning+"6 C\u1ea3nh b\u00e1o";b.style.pointerEvents="none";a.appendChild(b);return a},isOnline:function(a){return a&&a.time&&(new Date).getTime()-a.time<this._timeOnlineIntv?!0:
!1},role:function(){return"teacher"}});aztExam.MonitorTeacher=function(){var a;return{getInstance:function(b){a||(a=new aztExam.monitorTeacher(b));return a},releaseInst:function(){a=null},inst:function(){return this.getInstance()}}}();
